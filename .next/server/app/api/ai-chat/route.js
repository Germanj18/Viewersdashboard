"use strict";(()=>{var e={};e.id=321,e.ids=[321],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57903:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var s={};o.r(s),o.d(s,{POST:()=>p});var r=o(49303),a=o(88716),n=o(60670),i=o(87070);async function c(e){let t=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${process.env.GEMINI_API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Eres un asistente especializado en el Dashboard de M\xe9tricas para YouTube viewers. 

RESPONDE SIEMPRE:
- En espa\xf1ol, de manera amigable y profesional
- Con respuestas concisas y directas
- Solo responde a lo que el usuario pregunta espec\xedficamente
- Evita respuestas largas con listas a menos que se soliciten

CONTEXTO DEL SISTEMA:
- Dashboard para comprar viewers de YouTube
- Tiene 10 bloques que pueden ejecutar operaciones
- Service IDs disponibles: 334 (1h), 336 (2h), 459 (4h), 460 (6h), 657 (8h)
- Los bloques pueden hacer operaciones autom\xe1ticas crecientes, decrecientes o constantes
- El sistema muestra m\xe9tricas como tasa de \xe9xito, costos, etc.

CONSULTA DEL USUARIO: ${e}`}]}],generationConfig:{temperature:.7,topK:1,topP:1,maxOutputTokens:300}})});if(!t.ok)throw Error(`Gemini API error: ${t.statusText}`);let o=await t.json();return o.candidates[0]?.content?.parts[0]?.text||"Lo siento, no pude procesar tu consulta."}async function u(e){let t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.OPENAI_API_KEY}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:e,max_tokens:300,temperature:.7})});if(!t.ok)throw Error(`OpenAI API error: ${t.statusText}`);return(await t.json()).choices[0].message.content}async function p(e){try{let t;let{messages:o}=await e.json();if(!o||!Array.isArray(o))return i.NextResponse.json({error:"Formato de mensajes inv\xe1lido"},{status:400});let s=o[o.length-1]?.content||"";try{if(process.env.GEMINI_API_KEY)t=await c(s);else if(process.env.OPENAI_API_KEY)t=await u(o);else throw Error("No API keys configured")}catch(e){console.log("\uD83D\uDD34 API externa fall\xf3, usando respuestas locales:",e),t=function(e){let t=e.toLowerCase();for(let[e,o]of Object.entries({viewers:{keywords:["viewer","cuanto","cantidad","necesito"],response:`Para calcular viewers, define tu objetivo y elige el Service ID adecuado. Los servicios m\xe1s largos (6h-8h) suelen ser m\xe1s eficientes en costo. \xbfCu\xe1l es tu meta espec\xedfica?`},costos:{keywords:["costo","precio","dinero","barato"],response:`Los Service IDs m\xe1s largos (657 de 8h, 460 de 6h) ofrecen mejor costo por viewer. Revisa la m\xe9trica "Costo por Viewer" en tu dashboard para optimizar.`},bloques:{keywords:["bloque","configurar","como"],response:`Cada bloque puede configurarse independientemente con cantidad, Service ID y timing. Puedes usar patrones autom\xe1ticos crecientes, decrecientes o constantes. \xbfQu\xe9 espec\xedficamente quieres configurar?`},automatico:{keywords:["automatico","creciente","decreciente"],response:`Los bloques soportan operaciones autom\xe1ticas: creciente (aumenta viewers), decreciente (reduce viewers) o constante (misma cantidad). \xbfQu\xe9 patr\xf3n te interesa?`}}))if(o.keywords.some(e=>t.includes(e)))return o.response;return`🤖 Hola! Soy tu asistente del Dashboard de M\xe9tricas. \xbfEn qu\xe9 puedo ayudarte espec\xedficamente?`}(s)}return i.NextResponse.json({response:t})}catch(e){return console.error("Error en AI chat API:",e),i.NextResponse.json({response:"❌ Lo siento, hubo un error. \xbfPodr\xedas intentar reformular tu pregunta?"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/ai-chat/route",pathname:"/api/ai-chat",filename:"route",bundlePath:"app/api/ai-chat/route"},resolvedPagePath:"C:\\Users\\German\\Desktop\\Dashboard Viewers- LaCasa\\youtube-viewers-lacasa\\src\\app\\api\\ai-chat\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:h}=d,x="/api/ai-chat/route";function f(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),s=t.X(0,[948,972],()=>o(57903));module.exports=s})();