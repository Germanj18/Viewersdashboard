"use strict";(()=>{var e={};e.id=798,e.ids=[798],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},73837:e=>{e.exports=require("util")},55363:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>E,requestAsyncStorage:()=>d,routeModule:()=>m,serverHooks:()=>S,staticGenerationAsyncStorage:()=>l});var s={};t.r(s),t.d(s,{GET:()=>u,POST:()=>c});var n=t(49303),o=t(88716),i=t(60670),a=t(87070);let p=new(t(31059)).Z(process.env.STRIPE_SECRET_KEY,{apiVersion:"2025-06-30.basil"});async function u(){return a.NextResponse.json({message:"Stripe API is working",hasSecretKey:!!process.env.STRIPE_SECRET_KEY,hasPublishableKey:!!process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,environment:"production"})}async function c(e){try{if(console.log("=== STRIPE PAYMENT INTENT API ==="),!process.env.STRIPE_SECRET_KEY)return console.error("STRIPE_SECRET_KEY not found in environment variables"),a.NextResponse.json({error:"Stripe not configured",message:"STRIPE_SECRET_KEY missing in environment variables"},{status:500});let{amount:r,description:t}=await e.json();if(console.log("Received amount:",r,"description:",t),!r||isNaN(r)||r<=0)return a.NextResponse.json({error:"Invalid amount",message:"Amount must be a positive number"},{status:400});if(r>999999)return a.NextResponse.json({error:"Amount too large",message:"Maximum amount is $999,999 USD"},{status:400});let s=await p.paymentIntents.create({amount:Math.round(100*r),currency:"usd",description:t||"Servicio de An\xe1lisis de Datos - ServiceDG",metadata:{service:"ServicioAnalisisDatos",provider:"ServiceDG",external_reference:`servicedg-stripe-${Date.now()}`,amount_usd:r.toString()},statement_descriptor_suffix:"SERVICEDG",automatic_payment_methods:{enabled:!0}});return console.log("✅ Stripe PaymentIntent created successfully:",s.id),a.NextResponse.json({clientSecret:s.client_secret,paymentIntentId:s.id,amount:r,currency:"usd"})}catch(e){if(console.error("❌ Stripe API Error:",e),"StripeCardError"===e.type)return a.NextResponse.json({error:"Card error",message:e.message},{status:400});if("StripeInvalidRequestError"===e.type)return a.NextResponse.json({error:"Invalid request",message:e.message},{status:400});if("StripeAPIError"===e.type)return a.NextResponse.json({error:"Stripe API error",message:"Service temporarily unavailable"},{status:503});if("StripeConnectionError"===e.type)return a.NextResponse.json({error:"Network error",message:"Unable to connect to Stripe"},{status:503});if("StripeAuthenticationError"===e.type)return a.NextResponse.json({error:"Authentication error",message:"Invalid Stripe credentials"},{status:401});return a.NextResponse.json({error:"Server error",message:e.message||"Unknown server error"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/stripe/create-payment-intent/route",pathname:"/api/stripe/create-payment-intent",filename:"route",bundlePath:"app/api/stripe/create-payment-intent/route"},resolvedPagePath:"C:\\Users\\German\\Desktop\\Dashboard Viewers- LaCasa\\youtube-viewers-lacasa\\src\\app\\api\\stripe\\create-payment-intent\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:S}=m,v="/api/stripe/create-payment-intent/route";function E(){return(0,i.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:l})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972,749,59],()=>t(55363));module.exports=s})();