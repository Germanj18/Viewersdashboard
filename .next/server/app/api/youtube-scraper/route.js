"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/youtube-scraper/route";
exports.ids = ["app/api/youtube-scraper/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube-scraper%2Froute&page=%2Fapi%2Fyoutube-scraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-scraper%2Froute.ts&appDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube-scraper%2Froute&page=%2Fapi%2Fyoutube-scraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-scraper%2Froute.ts&appDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_German_Desktop_Dashboard_Viewers_LaCasa_youtube_viewers_lacasa_src_app_api_youtube_scraper_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/youtube-scraper/route.ts */ \"(rsc)/./src/app/api/youtube-scraper/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/youtube-scraper/route\",\n        pathname: \"/api/youtube-scraper\",\n        filename: \"route\",\n        bundlePath: \"app/api/youtube-scraper/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\api\\\\youtube-scraper\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_German_Desktop_Dashboard_Viewers_LaCasa_youtube_viewers_lacasa_src_app_api_youtube_scraper_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/youtube-scraper/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ5b3V0dWJlLXNjcmFwZXIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnlvdXR1YmUtc2NyYXBlciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnlvdXR1YmUtc2NyYXBlciUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNHZXJtYW4lNUNEZXNrdG9wJTVDRGFzaGJvYXJkJTIwVmlld2Vycy0lMjBMYUNhc2ElNUN5b3V0dWJlLXZpZXdlcnMtbGFjYXNhJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNHZXJtYW4lNUNEZXNrdG9wJTVDRGFzaGJvYXJkJTIwVmlld2Vycy0lMjBMYUNhc2ElNUN5b3V0dWJlLXZpZXdlcnMtbGFjYXNhJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1RTtBQUNwSjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3lvdXR1YmUtdmlld2Vycy1sYWNhc2EvPzlkMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcR2VybWFuXFxcXERlc2t0b3BcXFxcRGFzaGJvYXJkIFZpZXdlcnMtIExhQ2FzYVxcXFx5b3V0dWJlLXZpZXdlcnMtbGFjYXNhXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHlvdXR1YmUtc2NyYXBlclxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkveW91dHViZS1zY3JhcGVyL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkveW91dHViZS1zY3JhcGVyXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS95b3V0dWJlLXNjcmFwZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxHZXJtYW5cXFxcRGVza3RvcFxcXFxEYXNoYm9hcmQgVmlld2Vycy0gTGFDYXNhXFxcXHlvdXR1YmUtdmlld2Vycy1sYWNhc2FcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxceW91dHViZS1zY3JhcGVyXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS95b3V0dWJlLXNjcmFwZXIvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube-scraper%2Froute&page=%2Fapi%2Fyoutube-scraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-scraper%2Froute.ts&appDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/youtube-scraper/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/youtube-scraper/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nasync function POST(request) {\n    try {\n        const { url, checkRedirects, detectLiveStream } = await request.json();\n        if (!url) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                status: \"error\",\n                message: \"URL de YouTube requerida\",\n                viewers: 0,\n                isLive: false,\n                title: \"\",\n                timestamp: new Date().toISOString(),\n                url: \"\"\n            }, {\n                status: 400\n            });\n        }\n        // Validar que sea una URL de YouTube\n        const youtubeRegex = /^(https?:\\/\\/)?(www\\.)?(youtube\\.com|youtu\\.be)\\/.+$/;\n        if (!youtubeRegex.test(url)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                status: \"error\",\n                message: \"URL de YouTube inv\\xe1lida\",\n                viewers: 0,\n                isLive: false,\n                title: \"\",\n                timestamp: new Date().toISOString(),\n                url\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"\\uD83D\\uDD0D Iniciando scraping de YouTube:\", url);\n        // Si es detección de stream en vivo desde canal\n        if (detectLiveStream) {\n            return await detectLiveStreamFromChannel(url);\n        }\n        // Si es verificación de redirecciones\n        if (checkRedirects) {\n            return await checkUrlRedirects(url);\n        }\n        // Hacer request a YouTube con headers que simulan navegador\n        const response = await fetch(url, {\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n                \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n                \"Accept-Language\": \"es-ES,es;q=0.9,en;q=0.8\",\n                \"Accept-Encoding\": \"gzip, deflate, br\",\n                \"Connection\": \"keep-alive\",\n                \"Upgrade-Insecure-Requests\": \"1\",\n                \"Cache-Control\": \"no-cache\"\n            },\n            method: \"GET\"\n        });\n        if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n        const html = await response.text();\n        // Extraer información del HTML\n        const result = extractYouTubeData(html, url);\n        console.log(\"✅ Scraping completado:\", result);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (error) {\n        console.error(\"❌ Error en scraping de YouTube:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Error desconocido\",\n            viewers: 0,\n            isLive: false,\n            title: \"\",\n            timestamp: new Date().toISOString(),\n            url: \"\"\n        }, {\n            status: 500\n        });\n    }\n}\nfunction extractYouTubeData(html, url) {\n    try {\n        // Extraer título del video\n        let title = \"\";\n        const titleMatch = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n        if (titleMatch) {\n            title = titleMatch[1].replace(\" - YouTube\", \"\").trim();\n        }\n        // Buscar indicadores de stream en vivo\n        const liveIndicators = [\n            /watching now/i,\n            /viewers watching/i,\n            /en directo/i,\n            /live now/i,\n            /\"isLiveContent\":true/i,\n            /\"isLive\":true/i\n        ];\n        const isLive = liveIndicators.some((pattern)=>pattern.test(html));\n        // Extraer número de viewers con múltiples patrones\n        let viewers = 0;\n        if (isLive) {\n            // Patrones para viewers en vivo\n            const viewerPatterns = [\n                /\"viewCount\":{\"videoViewCountRenderer\":{\"viewCount\":{\"simpleText\":\"([^\"]+)\"/,\n                /\"concurrentViewers\":\"([^\"]+)\"/,\n                /\"watching now\"/i,\n                /(\\d+(?:,\\d+)*)\\s*watching/i,\n                /(\\d+(?:,\\d+)*)\\s*viewers?/i,\n                /(\\d+(?:\\.\\d+)?[KMB]?)\\s*watching/i,\n                /(\\d+(?:\\.\\d+)?[KMB]?)\\s*viewers?/i\n            ];\n            for (const pattern of viewerPatterns){\n                const match = html.match(pattern);\n                if (match) {\n                    let viewerText = match[1];\n                    viewers = parseViewerCount(viewerText);\n                    if (viewers > 0) {\n                        console.log(`� Viewers encontrados con patrón: ${viewerText} → ${viewers}`);\n                        break;\n                    }\n                }\n            }\n            // Buscar en JSON embebido\n            if (viewers === 0) {\n                const jsonMatches = html.match(/var ytInitialData = ({.*?});/);\n                if (jsonMatches) {\n                    try {\n                        const data = JSON.parse(jsonMatches[1]);\n                        viewers = findViewersInObject(data);\n                    } catch (e) {\n                        console.warn(\"Error parseando ytInitialData:\", e);\n                    }\n                }\n            }\n        } else {\n            // Para videos no en vivo, buscar views totales\n            const viewPatterns = [\n                /(\\d+(?:,\\d+)*)\\s*views?/i,\n                /(\\d+(?:\\.\\d+)?[KMB]?)\\s*views?/i,\n                /\"viewCount\":\"([^\"]+)\"/\n            ];\n            for (const pattern of viewPatterns){\n                const match = html.match(pattern);\n                if (match) {\n                    viewers = parseViewerCount(match[1]);\n                    if (viewers > 0) break;\n                }\n            }\n        }\n        return {\n            viewers,\n            isLive,\n            title,\n            status: \"success\",\n            timestamp: new Date().toISOString(),\n            url\n        };\n    } catch (error) {\n        console.error(\"Error extrayendo datos:\", error);\n        return {\n            viewers: 0,\n            isLive: false,\n            title: \"\",\n            status: \"error\",\n            message: \"Error procesando respuesta de YouTube\",\n            timestamp: new Date().toISOString(),\n            url\n        };\n    }\n}\nfunction findViewersInObject(obj) {\n    if (!obj || typeof obj !== \"object\") return 0;\n    const keys = [\n        \"concurrentViewers\",\n        \"viewCount\",\n        \"watching\",\n        \"viewers\"\n    ];\n    for (const key of keys){\n        if (obj[key]) {\n            const value = typeof obj[key] === \"object\" ? obj[key].simpleText || obj[key].runs?.[0]?.text : obj[key];\n            if (value) {\n                const parsed = parseViewerCount(value.toString());\n                if (parsed > 0) return parsed;\n            }\n        }\n    }\n    // Búsqueda recursiva\n    for (const value of Object.values(obj)){\n        if (typeof value === \"object\" && value !== null) {\n            const result = findViewersInObject(value);\n            if (result > 0) return result;\n        }\n    }\n    return 0;\n}\nfunction parseViewerCount(text) {\n    if (!text) return 0;\n    // Limpiar texto\n    text = text.replace(/[^\\d,.KMB]/gi, \"\");\n    // Manejar notación con K, M, B\n    const multipliers = {\n        \"K\": 1000,\n        \"M\": 1000000,\n        \"B\": 1000000000\n    };\n    const match = text.match(/^([\\d,.]+)([KMB])?$/i);\n    if (match) {\n        let number = parseFloat(match[1].replace(/,/g, \"\"));\n        const suffix = match[2]?.toUpperCase();\n        if (suffix && multipliers[suffix]) {\n            number *= multipliers[suffix];\n        }\n        return Math.round(number);\n    }\n    // Fallback: solo números\n    const numMatch = text.match(/[\\d,]+/);\n    if (numMatch) {\n        return parseInt(numMatch[0].replace(/,/g, \"\"), 10) || 0;\n    }\n    return 0;\n}\n// Función para detectar streams en vivo desde la página del canal\nasync function detectLiveStreamFromChannel(channelUrl) {\n    try {\n        console.log(\"\\uD83D\\uDD0D Detectando stream en vivo desde canal:\", channelUrl);\n        const response = await fetch(channelUrl, {\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n                \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n                \"Accept-Language\": \"es-ES,es;q=0.9,en;q=0.8\",\n                \"Accept-Encoding\": \"gzip, deflate, br\",\n                \"Connection\": \"keep-alive\",\n                \"Upgrade-Insecure-Requests\": \"1\",\n                \"Cache-Control\": \"no-cache\"\n            },\n            method: \"GET\"\n        });\n        if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n        const html = await response.text();\n        // Buscar enlaces de stream en vivo\n        const liveStreamPatterns = [\n            /\\/watch\\?v=([a-zA-Z0-9_-]{11})[^\"]*\"[^>]*>.*?(LIVE|EN DIRECTO|STREAMING)/gi,\n            /\\/watch\\?v=([a-zA-Z0-9_-]{11})[^\"]*\"[^>]*class=\"[^\"]*live[^\"]*\"/gi,\n            /\"url\":\"\\\\?\\/watch\\?v=([a-zA-Z0-9_-]{11})[^\"]*\"[^}]*\"isLiveContent\":true/gi\n        ];\n        for (const pattern of liveStreamPatterns){\n            const matches = Array.from(html.matchAll(pattern));\n            for (const match of matches){\n                if (match[1]) {\n                    const videoId = match[1];\n                    const liveStreamUrl = `https://www.youtube.com/watch?v=${videoId}`;\n                    console.log(\"✅ Stream en vivo encontrado:\", liveStreamUrl);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        status: \"success\",\n                        liveStreamUrl,\n                        message: \"Stream en vivo detectado\",\n                        timestamp: new Date().toISOString()\n                    });\n                }\n            }\n        }\n        // Si no se encontró stream específico, buscar indicadores generales\n        const liveIndicators = [\n            /watching now/i,\n            /viewers watching/i,\n            /en directo/i,\n            /live/i,\n            /streaming/i\n        ];\n        let hasLiveContent = false;\n        for (const indicator of liveIndicators){\n            if (indicator.test(html)) {\n                hasLiveContent = true;\n                break;\n            }\n        }\n        if (hasLiveContent) {\n            // Buscar cualquier video en la página principal\n            const videoMatch = html.match(/\\/watch\\?v=([a-zA-Z0-9_-]{11})/);\n            if (videoMatch) {\n                const liveStreamUrl = `https://www.youtube.com/watch?v=${videoMatch[1]}`;\n                console.log(\"⚠️ Posible stream detectado (verificar):\", liveStreamUrl);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    status: \"success\",\n                    liveStreamUrl,\n                    message: \"Posible stream detectado (requiere verificaci\\xf3n)\",\n                    timestamp: new Date().toISOString()\n                });\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: \"No se detect\\xf3 stream en vivo\",\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"❌ Error detectando stream desde canal:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Error desconocido\",\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\n// Función para verificar redirecciones de URL\nasync function checkUrlRedirects(originalUrl) {\n    try {\n        console.log(\"\\uD83D\\uDD04 Verificando redirecciones para:\", originalUrl);\n        const response = await fetch(originalUrl, {\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n                \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n                \"Accept-Language\": \"es-ES,es;q=0.9,en;q=0.8\",\n                \"Accept-Encoding\": \"gzip, deflate, br\",\n                \"Connection\": \"keep-alive\",\n                \"Upgrade-Insecure-Requests\": \"1\",\n                \"Cache-Control\": \"no-cache\"\n            },\n            method: \"GET\",\n            redirect: \"follow\" // Seguir redirecciones automáticamente\n        });\n        const finalUrl = response.url;\n        if (finalUrl !== originalUrl) {\n            console.log(\"✅ Redirecci\\xf3n detectada:\", originalUrl, \"->\", finalUrl);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                status: \"success\",\n                redirectedUrl: finalUrl,\n                message: \"Redirecci\\xf3n detectada\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Si no hay redirección HTTP, buscar redirecciones en JavaScript/Meta tags\n        const html = await response.text();\n        // Buscar meta refresh\n        const metaRefreshMatch = html.match(/<meta[^>]*http-equiv=[\"']refresh[\"'][^>]*content=[\"'][^\"']*url=([^\"']+)[\"']/i);\n        if (metaRefreshMatch) {\n            const redirectUrl = metaRefreshMatch[1];\n            if (redirectUrl && redirectUrl !== originalUrl) {\n                console.log(\"✅ Redirecci\\xf3n meta refresh detectada:\", redirectUrl);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    status: \"success\",\n                    redirectedUrl: redirectUrl,\n                    message: \"Redirecci\\xf3n meta refresh detectada\",\n                    timestamp: new Date().toISOString()\n                });\n            }\n        }\n        // Buscar window.location redirects\n        const jsRedirectMatch = html.match(/window\\.location(?:\\.href)?\\s*=\\s*[\"']([^\"']+)[\"']/i);\n        if (jsRedirectMatch) {\n            const redirectUrl = jsRedirectMatch[1];\n            if (redirectUrl && redirectUrl !== originalUrl) {\n                console.log(\"✅ Redirecci\\xf3n JavaScript detectada:\", redirectUrl);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    status: \"success\",\n                    redirectedUrl: redirectUrl,\n                    message: \"Redirecci\\xf3n JavaScript detectada\",\n                    timestamp: new Date().toISOString()\n                });\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"success\",\n            message: \"No se detectaron redirecciones\",\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"❌ Error verificando redirecciones:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Error desconocido\",\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS95b3V0dWJlLXNjcmFwZXIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0Q7QUFjakQsZUFBZUMsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsR0FBRyxFQUFFQyxjQUFjLEVBQUVDLGdCQUFnQixFQUFFLEdBQUcsTUFBTUgsUUFBUUksSUFBSTtRQUVwRSxJQUFJLENBQUNILEtBQUs7WUFDUixPQUFPSCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUN2QkMsUUFBUTtnQkFDUkMsU0FBUztnQkFDVEMsU0FBUztnQkFDVEMsUUFBUTtnQkFDUkMsT0FBTztnQkFDUEMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNqQ1gsS0FBSztZQUNQLEdBQUc7Z0JBQUVJLFFBQVE7WUFBSTtRQUNuQjtRQUVBLHFDQUFxQztRQUNyQyxNQUFNUSxlQUFlO1FBQ3JCLElBQUksQ0FBQ0EsYUFBYUMsSUFBSSxDQUFDYixNQUFNO1lBQzNCLE9BQU9ILHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7Z0JBQ3ZCQyxRQUFRO2dCQUNSQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUQyxRQUFRO2dCQUNSQyxPQUFPO2dCQUNQQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7Z0JBQ2pDWDtZQUNGLEdBQUc7Z0JBQUVJLFFBQVE7WUFBSTtRQUNuQjtRQUVBVSxRQUFRQyxHQUFHLENBQUMsK0NBQXFDZjtRQUVqRCxnREFBZ0Q7UUFDaEQsSUFBSUUsa0JBQWtCO1lBQ3BCLE9BQU8sTUFBTWMsNEJBQTRCaEI7UUFDM0M7UUFFQSxzQ0FBc0M7UUFDdEMsSUFBSUMsZ0JBQWdCO1lBQ2xCLE9BQU8sTUFBTWdCLGtCQUFrQmpCO1FBQ2pDO1FBRUEsNERBQTREO1FBQzVELE1BQU1rQixXQUFXLE1BQU1DLE1BQU1uQixLQUFLO1lBQ2hDb0IsU0FBUztnQkFDUCxjQUFjO2dCQUNkLFVBQVU7Z0JBQ1YsbUJBQW1CO2dCQUNuQixtQkFBbUI7Z0JBQ25CLGNBQWM7Z0JBQ2QsNkJBQTZCO2dCQUM3QixpQkFBaUI7WUFDbkI7WUFDQUMsUUFBUTtRQUNWO1FBRUEsSUFBSSxDQUFDSCxTQUFTSSxFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJQyxNQUFNLENBQUMsS0FBSyxFQUFFTCxTQUFTZCxNQUFNLENBQUMsRUFBRSxFQUFFYyxTQUFTTSxVQUFVLENBQUMsQ0FBQztRQUNuRTtRQUVBLE1BQU1DLE9BQU8sTUFBTVAsU0FBU1EsSUFBSTtRQUVoQywrQkFBK0I7UUFDL0IsTUFBTUMsU0FBU0MsbUJBQW1CSCxNQUFNekI7UUFFeENjLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJZO1FBRXRDLE9BQU85QixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDd0I7SUFFM0IsRUFBRSxPQUFPRSxPQUFPO1FBQ2RmLFFBQVFlLEtBQUssQ0FBQyxtQ0FBbUNBO1FBRWpELE9BQU9oQyxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQ3ZCQyxRQUFRO1lBQ1JDLFNBQVN3QixpQkFBaUJOLFFBQVFNLE1BQU14QixPQUFPLEdBQUc7WUFDbERDLFNBQVM7WUFDVEMsUUFBUTtZQUNSQyxPQUFPO1lBQ1BDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztZQUNqQ1gsS0FBSztRQUNQLEdBQUc7WUFBRUksUUFBUTtRQUFJO0lBQ25CO0FBQ0Y7QUFFQSxTQUFTd0IsbUJBQW1CSCxJQUFZLEVBQUV6QixHQUFXO0lBQ25ELElBQUk7UUFDRiwyQkFBMkI7UUFDM0IsSUFBSVEsUUFBUTtRQUNaLE1BQU1zQixhQUFhTCxLQUFLTSxLQUFLLENBQUM7UUFDOUIsSUFBSUQsWUFBWTtZQUNkdEIsUUFBUXNCLFVBQVUsQ0FBQyxFQUFFLENBQUNFLE9BQU8sQ0FBQyxjQUFjLElBQUlDLElBQUk7UUFDdEQ7UUFFQSx1Q0FBdUM7UUFDdkMsTUFBTUMsaUJBQWlCO1lBQ3JCO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBRUQsTUFBTTNCLFNBQVMyQixlQUFlQyxJQUFJLENBQUNDLENBQUFBLFVBQVdBLFFBQVF2QixJQUFJLENBQUNZO1FBRTNELG1EQUFtRDtRQUNuRCxJQUFJbkIsVUFBVTtRQUVkLElBQUlDLFFBQVE7WUFDVixnQ0FBZ0M7WUFDaEMsTUFBTThCLGlCQUFpQjtnQkFDckI7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7YUFDRDtZQUVELEtBQUssTUFBTUQsV0FBV0MsZUFBZ0I7Z0JBQ3BDLE1BQU1OLFFBQVFOLEtBQUtNLEtBQUssQ0FBQ0s7Z0JBQ3pCLElBQUlMLE9BQU87b0JBQ1QsSUFBSU8sYUFBYVAsS0FBSyxDQUFDLEVBQUU7b0JBQ3pCekIsVUFBVWlDLGlCQUFpQkQ7b0JBQzNCLElBQUloQyxVQUFVLEdBQUc7d0JBQ2ZRLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGtDQUFrQyxFQUFFdUIsV0FBVyxHQUFHLEVBQUVoQyxRQUFRLENBQUM7d0JBQzFFO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSwwQkFBMEI7WUFDMUIsSUFBSUEsWUFBWSxHQUFHO2dCQUNqQixNQUFNa0MsY0FBY2YsS0FBS00sS0FBSyxDQUFDO2dCQUMvQixJQUFJUyxhQUFhO29CQUNmLElBQUk7d0JBQ0YsTUFBTUMsT0FBT0MsS0FBS0MsS0FBSyxDQUFDSCxXQUFXLENBQUMsRUFBRTt3QkFDdENsQyxVQUFVc0Msb0JBQW9CSDtvQkFDaEMsRUFBRSxPQUFPSSxHQUFHO3dCQUNWL0IsUUFBUWdDLElBQUksQ0FBQyxrQ0FBa0NEO29CQUNqRDtnQkFDRjtZQUNGO1FBQ0YsT0FBTztZQUNMLCtDQUErQztZQUMvQyxNQUFNRSxlQUFlO2dCQUNuQjtnQkFDQTtnQkFDQTthQUNEO1lBRUQsS0FBSyxNQUFNWCxXQUFXVyxhQUFjO2dCQUNsQyxNQUFNaEIsUUFBUU4sS0FBS00sS0FBSyxDQUFDSztnQkFDekIsSUFBSUwsT0FBTztvQkFDVHpCLFVBQVVpQyxpQkFBaUJSLEtBQUssQ0FBQyxFQUFFO29CQUNuQyxJQUFJekIsVUFBVSxHQUFHO2dCQUNuQjtZQUNGO1FBQ0Y7UUFFQSxPQUFPO1lBQ0xBO1lBQ0FDO1lBQ0FDO1lBQ0FKLFFBQVE7WUFDUkssV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ2pDWDtRQUNGO0lBRUYsRUFBRSxPQUFPNkIsT0FBTztRQUNkZixRQUFRZSxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPO1lBQ0x2QixTQUFTO1lBQ1RDLFFBQVE7WUFDUkMsT0FBTztZQUNQSixRQUFRO1lBQ1JDLFNBQVM7WUFDVEksV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ2pDWDtRQUNGO0lBQ0Y7QUFDRjtBQUVBLFNBQVM0QyxvQkFBb0JJLEdBQVE7SUFDbkMsSUFBSSxDQUFDQSxPQUFPLE9BQU9BLFFBQVEsVUFBVSxPQUFPO0lBRTVDLE1BQU1DLE9BQU87UUFBQztRQUFxQjtRQUFhO1FBQVk7S0FBVTtJQUV0RSxLQUFLLE1BQU1DLE9BQU9ELEtBQU07UUFDdEIsSUFBSUQsR0FBRyxDQUFDRSxJQUFJLEVBQUU7WUFDWixNQUFNQyxRQUFRLE9BQU9ILEdBQUcsQ0FBQ0UsSUFBSSxLQUFLLFdBQVdGLEdBQUcsQ0FBQ0UsSUFBSSxDQUFDRSxVQUFVLElBQUlKLEdBQUcsQ0FBQ0UsSUFBSSxDQUFDRyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUzQixPQUFPc0IsR0FBRyxDQUFDRSxJQUFJO1lBQ3ZHLElBQUlDLE9BQU87Z0JBQ1QsTUFBTUcsU0FBU2YsaUJBQWlCWSxNQUFNSSxRQUFRO2dCQUM5QyxJQUFJRCxTQUFTLEdBQUcsT0FBT0E7WUFDekI7UUFDRjtJQUNGO0lBRUEscUJBQXFCO0lBQ3JCLEtBQUssTUFBTUgsU0FBU0ssT0FBT0MsTUFBTSxDQUFDVCxLQUFNO1FBQ3RDLElBQUksT0FBT0csVUFBVSxZQUFZQSxVQUFVLE1BQU07WUFDL0MsTUFBTXhCLFNBQVNpQixvQkFBb0JPO1lBQ25DLElBQUl4QixTQUFTLEdBQUcsT0FBT0E7UUFDekI7SUFDRjtJQUVBLE9BQU87QUFDVDtBQUVBLFNBQVNZLGlCQUFpQmIsSUFBWTtJQUNwQyxJQUFJLENBQUNBLE1BQU0sT0FBTztJQUVsQixnQkFBZ0I7SUFDaEJBLE9BQU9BLEtBQUtNLE9BQU8sQ0FBQyxnQkFBZ0I7SUFFcEMsK0JBQStCO0lBQy9CLE1BQU0wQixjQUF5QztRQUM3QyxLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7SUFDUDtJQUVBLE1BQU0zQixRQUFRTCxLQUFLSyxLQUFLLENBQUM7SUFDekIsSUFBSUEsT0FBTztRQUNULElBQUk0QixTQUFTQyxXQUFXN0IsS0FBSyxDQUFDLEVBQUUsQ0FBQ0MsT0FBTyxDQUFDLE1BQU07UUFDL0MsTUFBTTZCLFNBQVM5QixLQUFLLENBQUMsRUFBRSxFQUFFK0I7UUFFekIsSUFBSUQsVUFBVUgsV0FBVyxDQUFDRyxPQUFPLEVBQUU7WUFDakNGLFVBQVVELFdBQVcsQ0FBQ0csT0FBTztRQUMvQjtRQUVBLE9BQU9FLEtBQUtDLEtBQUssQ0FBQ0w7SUFDcEI7SUFFQSx5QkFBeUI7SUFDekIsTUFBTU0sV0FBV3ZDLEtBQUtLLEtBQUssQ0FBQztJQUM1QixJQUFJa0MsVUFBVTtRQUNaLE9BQU9DLFNBQVNELFFBQVEsQ0FBQyxFQUFFLENBQUNqQyxPQUFPLENBQUMsTUFBTSxLQUFLLE9BQU87SUFDeEQ7SUFFQSxPQUFPO0FBQ1Q7QUFFQSxrRUFBa0U7QUFDbEUsZUFBZWhCLDRCQUE0Qm1ELFVBQWtCO0lBQzNELElBQUk7UUFDRnJELFFBQVFDLEdBQUcsQ0FBQyx1REFBNkNvRDtRQUV6RCxNQUFNakQsV0FBVyxNQUFNQyxNQUFNZ0QsWUFBWTtZQUN2Qy9DLFNBQVM7Z0JBQ1AsY0FBYztnQkFDZCxVQUFVO2dCQUNWLG1CQUFtQjtnQkFDbkIsbUJBQW1CO2dCQUNuQixjQUFjO2dCQUNkLDZCQUE2QjtnQkFDN0IsaUJBQWlCO1lBQ25CO1lBQ0FDLFFBQVE7UUFDVjtRQUVBLElBQUksQ0FBQ0gsU0FBU0ksRUFBRSxFQUFFO1lBQ2hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLEtBQUssRUFBRUwsU0FBU2QsTUFBTSxDQUFDLEVBQUUsRUFBRWMsU0FBU00sVUFBVSxDQUFDLENBQUM7UUFDbkU7UUFFQSxNQUFNQyxPQUFPLE1BQU1QLFNBQVNRLElBQUk7UUFFaEMsbUNBQW1DO1FBQ25DLE1BQU0wQyxxQkFBcUI7WUFDekI7WUFDQTtZQUNBO1NBQ0Q7UUFFRCxLQUFLLE1BQU1oQyxXQUFXZ0MsbUJBQW9CO1lBQ3hDLE1BQU1DLFVBQVVDLE1BQU1DLElBQUksQ0FBQzlDLEtBQUsrQyxRQUFRLENBQUNwQztZQUV6QyxLQUFLLE1BQU1MLFNBQVNzQyxRQUFTO2dCQUMzQixJQUFJdEMsS0FBSyxDQUFDLEVBQUUsRUFBRTtvQkFDWixNQUFNMEMsVUFBVTFDLEtBQUssQ0FBQyxFQUFFO29CQUN4QixNQUFNMkMsZ0JBQWdCLENBQUMsZ0NBQWdDLEVBQUVELFFBQVEsQ0FBQztvQkFFbEUzRCxRQUFRQyxHQUFHLENBQUMsZ0NBQWdDMkQ7b0JBRTVDLE9BQU83RSxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO3dCQUN2QkMsUUFBUTt3QkFDUnNFO3dCQUNBckUsU0FBUzt3QkFDVEksV0FBVyxJQUFJQyxPQUFPQyxXQUFXO29CQUNuQztnQkFDRjtZQUNGO1FBQ0Y7UUFFQSxvRUFBb0U7UUFDcEUsTUFBTXVCLGlCQUFpQjtZQUNyQjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFFRCxJQUFJeUMsaUJBQWlCO1FBQ3JCLEtBQUssTUFBTUMsYUFBYTFDLGVBQWdCO1lBQ3RDLElBQUkwQyxVQUFVL0QsSUFBSSxDQUFDWSxPQUFPO2dCQUN4QmtELGlCQUFpQjtnQkFDakI7WUFDRjtRQUNGO1FBRUEsSUFBSUEsZ0JBQWdCO1lBQ2xCLGdEQUFnRDtZQUNoRCxNQUFNRSxhQUFhcEQsS0FBS00sS0FBSyxDQUFDO1lBQzlCLElBQUk4QyxZQUFZO2dCQUNkLE1BQU1ILGdCQUFnQixDQUFDLGdDQUFnQyxFQUFFRyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBRXhFL0QsUUFBUUMsR0FBRyxDQUFDLDRDQUE0QzJEO2dCQUV4RCxPQUFPN0UscURBQVlBLENBQUNNLElBQUksQ0FBQztvQkFDdkJDLFFBQVE7b0JBQ1JzRTtvQkFDQXJFLFNBQVM7b0JBQ1RJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztnQkFDbkM7WUFDRjtRQUNGO1FBRUEsT0FBT2QscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUN2QkMsUUFBUTtZQUNSQyxTQUFTO1lBQ1RJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUVGLEVBQUUsT0FBT2tCLE9BQU87UUFDZGYsUUFBUWUsS0FBSyxDQUFDLDBDQUEwQ0E7UUFFeEQsT0FBT2hDLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFDdkJDLFFBQVE7WUFDUkMsU0FBU3dCLGlCQUFpQk4sUUFBUU0sTUFBTXhCLE9BQU8sR0FBRztZQUNsREksV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DLEdBQUc7WUFBRVAsUUFBUTtRQUFJO0lBQ25CO0FBQ0Y7QUFFQSw4Q0FBOEM7QUFDOUMsZUFBZWEsa0JBQWtCNkQsV0FBbUI7SUFDbEQsSUFBSTtRQUNGaEUsUUFBUUMsR0FBRyxDQUFDLGdEQUFzQytEO1FBRWxELE1BQU01RCxXQUFXLE1BQU1DLE1BQU0yRCxhQUFhO1lBQ3hDMUQsU0FBUztnQkFDUCxjQUFjO2dCQUNkLFVBQVU7Z0JBQ1YsbUJBQW1CO2dCQUNuQixtQkFBbUI7Z0JBQ25CLGNBQWM7Z0JBQ2QsNkJBQTZCO2dCQUM3QixpQkFBaUI7WUFDbkI7WUFDQUMsUUFBUTtZQUNSMEQsVUFBVSxTQUFTLHVDQUF1QztRQUM1RDtRQUVBLE1BQU1DLFdBQVc5RCxTQUFTbEIsR0FBRztRQUU3QixJQUFJZ0YsYUFBYUYsYUFBYTtZQUM1QmhFLFFBQVFDLEdBQUcsQ0FBQywrQkFBNEIrRCxhQUFhLE1BQU1FO1lBRTNELE9BQU9uRixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUN2QkMsUUFBUTtnQkFDUjZFLGVBQWVEO2dCQUNmM0UsU0FBUztnQkFDVEksV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ25DO1FBQ0Y7UUFFQSwyRUFBMkU7UUFDM0UsTUFBTWMsT0FBTyxNQUFNUCxTQUFTUSxJQUFJO1FBRWhDLHNCQUFzQjtRQUN0QixNQUFNd0QsbUJBQW1CekQsS0FBS00sS0FBSyxDQUFDO1FBQ3BDLElBQUltRCxrQkFBa0I7WUFDcEIsTUFBTUMsY0FBY0QsZ0JBQWdCLENBQUMsRUFBRTtZQUN2QyxJQUFJQyxlQUFlQSxnQkFBZ0JMLGFBQWE7Z0JBQzlDaEUsUUFBUUMsR0FBRyxDQUFDLDRDQUF5Q29FO2dCQUVyRCxPQUFPdEYscURBQVlBLENBQUNNLElBQUksQ0FBQztvQkFDdkJDLFFBQVE7b0JBQ1I2RSxlQUFlRTtvQkFDZjlFLFNBQVM7b0JBQ1RJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztnQkFDbkM7WUFDRjtRQUNGO1FBRUEsbUNBQW1DO1FBQ25DLE1BQU15RSxrQkFBa0IzRCxLQUFLTSxLQUFLLENBQUM7UUFDbkMsSUFBSXFELGlCQUFpQjtZQUNuQixNQUFNRCxjQUFjQyxlQUFlLENBQUMsRUFBRTtZQUN0QyxJQUFJRCxlQUFlQSxnQkFBZ0JMLGFBQWE7Z0JBQzlDaEUsUUFBUUMsR0FBRyxDQUFDLDBDQUF1Q29FO2dCQUVuRCxPQUFPdEYscURBQVlBLENBQUNNLElBQUksQ0FBQztvQkFDdkJDLFFBQVE7b0JBQ1I2RSxlQUFlRTtvQkFDZjlFLFNBQVM7b0JBQ1RJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztnQkFDbkM7WUFDRjtRQUNGO1FBRUEsT0FBT2QscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUN2QkMsUUFBUTtZQUNSQyxTQUFTO1lBQ1RJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUVGLEVBQUUsT0FBT2tCLE9BQU87UUFDZGYsUUFBUWUsS0FBSyxDQUFDLHNDQUFzQ0E7UUFFcEQsT0FBT2hDLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFDdkJDLFFBQVE7WUFDUkMsU0FBU3dCLGlCQUFpQk4sUUFBUU0sTUFBTXhCLE9BQU8sR0FBRztZQUNsREksV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DLEdBQUc7WUFBRVAsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95b3V0dWJlLXZpZXdlcnMtbGFjYXNhLy4vc3JjL2FwcC9hcGkveW91dHViZS1zY3JhcGVyL3JvdXRlLnRzPzU5YjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuXHJcbmludGVyZmFjZSBZb3VUdWJlRGF0YSB7XHJcbiAgdmlld2VyczogbnVtYmVyO1xyXG4gIGlzTGl2ZTogYm9vbGVhbjtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHN0YXR1czogJ3N1Y2Nlc3MnIHwgJ2Vycm9yJztcclxuICBtZXNzYWdlPzogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIHJlZGlyZWN0ZWRVcmw/OiBzdHJpbmc7XHJcbiAgbGl2ZVN0cmVhbVVybD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB1cmwsIGNoZWNrUmVkaXJlY3RzLCBkZXRlY3RMaXZlU3RyZWFtIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIFxyXG4gICAgaWYgKCF1cmwpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdGF0dXM6ICdlcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ1VSTCBkZSBZb3VUdWJlIHJlcXVlcmlkYScsXHJcbiAgICAgICAgdmlld2VyczogMCxcclxuICAgICAgICBpc0xpdmU6IGZhbHNlLFxyXG4gICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICB1cmw6ICcnXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhciBxdWUgc2VhIHVuYSBVUkwgZGUgWW91VHViZVxyXG4gICAgY29uc3QgeW91dHViZVJlZ2V4ID0gL14oaHR0cHM/OlxcL1xcLyk/KHd3d1xcLik/KHlvdXR1YmVcXC5jb218eW91dHVcXC5iZSlcXC8uKyQvO1xyXG4gICAgaWYgKCF5b3V0dWJlUmVnZXgudGVzdCh1cmwpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdVUkwgZGUgWW91VHViZSBpbnbDoWxpZGEnLFxyXG4gICAgICAgIHZpZXdlcnM6IDAsXHJcbiAgICAgICAgaXNMaXZlOiBmYWxzZSxcclxuICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgdXJsXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/CflI0gSW5pY2lhbmRvIHNjcmFwaW5nIGRlIFlvdVR1YmU6JywgdXJsKTtcclxuXHJcbiAgICAvLyBTaSBlcyBkZXRlY2Npw7NuIGRlIHN0cmVhbSBlbiB2aXZvIGRlc2RlIGNhbmFsXHJcbiAgICBpZiAoZGV0ZWN0TGl2ZVN0cmVhbSkge1xyXG4gICAgICByZXR1cm4gYXdhaXQgZGV0ZWN0TGl2ZVN0cmVhbUZyb21DaGFubmVsKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2kgZXMgdmVyaWZpY2FjacOzbiBkZSByZWRpcmVjY2lvbmVzXHJcbiAgICBpZiAoY2hlY2tSZWRpcmVjdHMpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IGNoZWNrVXJsUmVkaXJlY3RzKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFjZXIgcmVxdWVzdCBhIFlvdVR1YmUgY29uIGhlYWRlcnMgcXVlIHNpbXVsYW4gbmF2ZWdhZG9yXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMC4wLjAuMCBTYWZhcmkvNTM3LjM2JyxcclxuICAgICAgICAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44JyxcclxuICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzogJ2VzLUVTLGVzO3E9MC45LGVuO3E9MC44JyxcclxuICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJyxcclxuICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJyxcclxuICAgICAgICAnVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyc6ICcxJyxcclxuICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZSdcclxuICAgICAgfSxcclxuICAgICAgbWV0aG9kOiAnR0VUJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgIFxyXG4gICAgLy8gRXh0cmFlciBpbmZvcm1hY2nDs24gZGVsIEhUTUxcclxuICAgIGNvbnN0IHJlc3VsdCA9IGV4dHJhY3RZb3VUdWJlRGF0YShodG1sLCB1cmwpO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIFNjcmFwaW5nIGNvbXBsZXRhZG86JywgcmVzdWx0KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdCk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZW4gc2NyYXBpbmcgZGUgWW91VHViZTonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcclxuICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3IgZGVzY29ub2NpZG8nLFxyXG4gICAgICB2aWV3ZXJzOiAwLFxyXG4gICAgICBpc0xpdmU6IGZhbHNlLFxyXG4gICAgICB0aXRsZTogJycsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cmw6ICcnXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdFlvdVR1YmVEYXRhKGh0bWw6IHN0cmluZywgdXJsOiBzdHJpbmcpOiBZb3VUdWJlRGF0YSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEV4dHJhZXIgdMOtdHVsbyBkZWwgdmlkZW9cclxuICAgIGxldCB0aXRsZSA9ICcnO1xyXG4gICAgY29uc3QgdGl0bGVNYXRjaCA9IGh0bWwubWF0Y2goLzx0aXRsZVtePl0qPihbXjxdKyk8XFwvdGl0bGU+L2kpO1xyXG4gICAgaWYgKHRpdGxlTWF0Y2gpIHtcclxuICAgICAgdGl0bGUgPSB0aXRsZU1hdGNoWzFdLnJlcGxhY2UoJyAtIFlvdVR1YmUnLCAnJykudHJpbSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJ1c2NhciBpbmRpY2Fkb3JlcyBkZSBzdHJlYW0gZW4gdml2b1xyXG4gICAgY29uc3QgbGl2ZUluZGljYXRvcnMgPSBbXHJcbiAgICAgIC93YXRjaGluZyBub3cvaSxcclxuICAgICAgL3ZpZXdlcnMgd2F0Y2hpbmcvaSxcclxuICAgICAgL2VuIGRpcmVjdG8vaSxcclxuICAgICAgL2xpdmUgbm93L2ksXHJcbiAgICAgIC9cImlzTGl2ZUNvbnRlbnRcIjp0cnVlL2ksXHJcbiAgICAgIC9cImlzTGl2ZVwiOnRydWUvaVxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBpc0xpdmUgPSBsaXZlSW5kaWNhdG9ycy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGh0bWwpKTtcclxuXHJcbiAgICAvLyBFeHRyYWVyIG7Dum1lcm8gZGUgdmlld2VycyBjb24gbcO6bHRpcGxlcyBwYXRyb25lc1xyXG4gICAgbGV0IHZpZXdlcnMgPSAwO1xyXG4gICAgXHJcbiAgICBpZiAoaXNMaXZlKSB7XHJcbiAgICAgIC8vIFBhdHJvbmVzIHBhcmEgdmlld2VycyBlbiB2aXZvXHJcbiAgICAgIGNvbnN0IHZpZXdlclBhdHRlcm5zID0gW1xyXG4gICAgICAgIC9cInZpZXdDb3VudFwiOntcInZpZGVvVmlld0NvdW50UmVuZGVyZXJcIjp7XCJ2aWV3Q291bnRcIjp7XCJzaW1wbGVUZXh0XCI6XCIoW15cIl0rKVwiLyxcclxuICAgICAgICAvXCJjb25jdXJyZW50Vmlld2Vyc1wiOlwiKFteXCJdKylcIi8sXHJcbiAgICAgICAgL1wid2F0Y2hpbmcgbm93XCIvaSxcclxuICAgICAgICAvKFxcZCsoPzosXFxkKykqKVxccyp3YXRjaGluZy9pLFxyXG4gICAgICAgIC8oXFxkKyg/OixcXGQrKSopXFxzKnZpZXdlcnM/L2ksXHJcbiAgICAgICAgLyhcXGQrKD86XFwuXFxkKyk/W0tNQl0/KVxccyp3YXRjaGluZy9pLFxyXG4gICAgICAgIC8oXFxkKyg/OlxcLlxcZCspP1tLTUJdPylcXHMqdmlld2Vycz8vaVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHZpZXdlclBhdHRlcm5zKSB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBodG1sLm1hdGNoKHBhdHRlcm4pO1xyXG4gICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgbGV0IHZpZXdlclRleHQgPSBtYXRjaFsxXTtcclxuICAgICAgICAgIHZpZXdlcnMgPSBwYXJzZVZpZXdlckNvdW50KHZpZXdlclRleHQpO1xyXG4gICAgICAgICAgaWYgKHZpZXdlcnMgPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDvv70gVmlld2VycyBlbmNvbnRyYWRvcyBjb24gcGF0csOzbjogJHt2aWV3ZXJUZXh0fSDihpIgJHt2aWV3ZXJzfWApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEJ1c2NhciBlbiBKU09OIGVtYmViaWRvXHJcbiAgICAgIGlmICh2aWV3ZXJzID09PSAwKSB7XHJcbiAgICAgICAgY29uc3QganNvbk1hdGNoZXMgPSBodG1sLm1hdGNoKC92YXIgeXRJbml0aWFsRGF0YSA9ICh7Lio/fSk7Lyk7XHJcbiAgICAgICAgaWYgKGpzb25NYXRjaGVzKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hlc1sxXSk7XHJcbiAgICAgICAgICAgIHZpZXdlcnMgPSBmaW5kVmlld2Vyc0luT2JqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHBhcnNlYW5kbyB5dEluaXRpYWxEYXRhOicsIGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gUGFyYSB2aWRlb3Mgbm8gZW4gdml2bywgYnVzY2FyIHZpZXdzIHRvdGFsZXNcclxuICAgICAgY29uc3Qgdmlld1BhdHRlcm5zID0gW1xyXG4gICAgICAgIC8oXFxkKyg/OixcXGQrKSopXFxzKnZpZXdzPy9pLFxyXG4gICAgICAgIC8oXFxkKyg/OlxcLlxcZCspP1tLTUJdPylcXHMqdmlld3M/L2ksXHJcbiAgICAgICAgL1widmlld0NvdW50XCI6XCIoW15cIl0rKVwiL1xyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHZpZXdQYXR0ZXJucykge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gaHRtbC5tYXRjaChwYXR0ZXJuKTtcclxuICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgIHZpZXdlcnMgPSBwYXJzZVZpZXdlckNvdW50KG1hdGNoWzFdKTtcclxuICAgICAgICAgIGlmICh2aWV3ZXJzID4gMCkgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmlld2VycyxcclxuICAgICAgaXNMaXZlLFxyXG4gICAgICB0aXRsZSxcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cmxcclxuICAgIH07XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleHRyYXllbmRvIGRhdG9zOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZpZXdlcnM6IDAsXHJcbiAgICAgIGlzTGl2ZTogZmFsc2UsXHJcbiAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICBtZXNzYWdlOiAnRXJyb3IgcHJvY2VzYW5kbyByZXNwdWVzdGEgZGUgWW91VHViZScsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cmxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kVmlld2Vyc0luT2JqZWN0KG9iajogYW55KTogbnVtYmVyIHtcclxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JykgcmV0dXJuIDA7XHJcbiAgXHJcbiAgY29uc3Qga2V5cyA9IFsnY29uY3VycmVudFZpZXdlcnMnLCAndmlld0NvdW50JywgJ3dhdGNoaW5nJywgJ3ZpZXdlcnMnXTtcclxuICBcclxuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XHJcbiAgICBpZiAob2JqW2tleV0pIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSB0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnID8gb2JqW2tleV0uc2ltcGxlVGV4dCB8fCBvYmpba2V5XS5ydW5zPy5bMF0/LnRleHQgOiBvYmpba2V5XTtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VWaWV3ZXJDb3VudCh2YWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAocGFyc2VkID4gMCkgcmV0dXJuIHBhcnNlZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyBCw7pzcXVlZGEgcmVjdXJzaXZhXHJcbiAgZm9yIChjb25zdCB2YWx1ZSBvZiBPYmplY3QudmFsdWVzKG9iaikpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbmRWaWV3ZXJzSW5PYmplY3QodmFsdWUpO1xyXG4gICAgICBpZiAocmVzdWx0ID4gMCkgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlVmlld2VyQ291bnQodGV4dDogc3RyaW5nKTogbnVtYmVyIHtcclxuICBpZiAoIXRleHQpIHJldHVybiAwO1xyXG4gIFxyXG4gIC8vIExpbXBpYXIgdGV4dG9cclxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9bXlxcZCwuS01CXS9naSwgJycpO1xyXG4gIFxyXG4gIC8vIE1hbmVqYXIgbm90YWNpw7NuIGNvbiBLLCBNLCBCXHJcbiAgY29uc3QgbXVsdGlwbGllcnM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7XHJcbiAgICAnSyc6IDEwMDAsXHJcbiAgICAnTSc6IDEwMDAwMDAsXHJcbiAgICAnQic6IDEwMDAwMDAwMDBcclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCgvXihbXFxkLC5dKykoW0tNQl0pPyQvaSk7XHJcbiAgaWYgKG1hdGNoKSB7XHJcbiAgICBsZXQgbnVtYmVyID0gcGFyc2VGbG9hdChtYXRjaFsxXS5yZXBsYWNlKC8sL2csICcnKSk7XHJcbiAgICBjb25zdCBzdWZmaXggPSBtYXRjaFsyXT8udG9VcHBlckNhc2UoKTtcclxuICAgIFxyXG4gICAgaWYgKHN1ZmZpeCAmJiBtdWx0aXBsaWVyc1tzdWZmaXhdKSB7XHJcbiAgICAgIG51bWJlciAqPSBtdWx0aXBsaWVyc1tzdWZmaXhdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIpO1xyXG4gIH1cclxuICBcclxuICAvLyBGYWxsYmFjazogc29sbyBuw7ptZXJvc1xyXG4gIGNvbnN0IG51bU1hdGNoID0gdGV4dC5tYXRjaCgvW1xcZCxdKy8pO1xyXG4gIGlmIChudW1NYXRjaCkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KG51bU1hdGNoWzBdLnJlcGxhY2UoLywvZywgJycpLCAxMCkgfHwgMDtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgZGV0ZWN0YXIgc3RyZWFtcyBlbiB2aXZvIGRlc2RlIGxhIHDDoWdpbmEgZGVsIGNhbmFsXHJcbmFzeW5jIGZ1bmN0aW9uIGRldGVjdExpdmVTdHJlYW1Gcm9tQ2hhbm5lbChjaGFubmVsVXJsOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflI0gRGV0ZWN0YW5kbyBzdHJlYW0gZW4gdml2byBkZXNkZSBjYW5hbDonLCBjaGFubmVsVXJsKTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGNoYW5uZWxVcmwsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjAuMC4wLjAgU2FmYXJpLzUzNy4zNicsXHJcbiAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLCovKjtxPTAuOCcsXHJcbiAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6ICdlcy1FUyxlcztxPTAuOSxlbjtxPTAuOCcsXHJcbiAgICAgICAgJ0FjY2VwdC1FbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlLCBicicsXHJcbiAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsXHJcbiAgICAgICAgJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnOiAnMScsXHJcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIG1ldGhvZDogJ0dFVCdcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICBcclxuICAgIC8vIEJ1c2NhciBlbmxhY2VzIGRlIHN0cmVhbSBlbiB2aXZvXHJcbiAgICBjb25zdCBsaXZlU3RyZWFtUGF0dGVybnMgPSBbXHJcbiAgICAgIC9cXC93YXRjaFxcP3Y9KFthLXpBLVowLTlfLV17MTF9KVteXCJdKlwiW14+XSo+Lio/KExJVkV8RU4gRElSRUNUT3xTVFJFQU1JTkcpL2dpLFxyXG4gICAgICAvXFwvd2F0Y2hcXD92PShbYS16QS1aMC05Xy1dezExfSlbXlwiXSpcIltePl0qY2xhc3M9XCJbXlwiXSpsaXZlW15cIl0qXCIvZ2ksXHJcbiAgICAgIC9cInVybFwiOlwiXFxcXD9cXC93YXRjaFxcP3Y9KFthLXpBLVowLTlfLV17MTF9KVteXCJdKlwiW159XSpcImlzTGl2ZUNvbnRlbnRcIjp0cnVlL2dpXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBsaXZlU3RyZWFtUGF0dGVybnMpIHtcclxuICAgICAgY29uc3QgbWF0Y2hlcyA9IEFycmF5LmZyb20oaHRtbC5tYXRjaEFsbChwYXR0ZXJuKSk7XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIG1hdGNoZXMpIHtcclxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcclxuICAgICAgICAgIGNvbnN0IHZpZGVvSWQgPSBtYXRjaFsxXTtcclxuICAgICAgICAgIGNvbnN0IGxpdmVTdHJlYW1VcmwgPSBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ke3ZpZGVvSWR9YDtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBTdHJlYW0gZW4gdml2byBlbmNvbnRyYWRvOicsIGxpdmVTdHJlYW1VcmwpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICAgICAgbGl2ZVN0cmVhbVVybCxcclxuICAgICAgICAgICAgbWVzc2FnZTogJ1N0cmVhbSBlbiB2aXZvIGRldGVjdGFkbycsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTaSBubyBzZSBlbmNvbnRyw7Mgc3RyZWFtIGVzcGVjw61maWNvLCBidXNjYXIgaW5kaWNhZG9yZXMgZ2VuZXJhbGVzXHJcbiAgICBjb25zdCBsaXZlSW5kaWNhdG9ycyA9IFtcclxuICAgICAgL3dhdGNoaW5nIG5vdy9pLFxyXG4gICAgICAvdmlld2VycyB3YXRjaGluZy9pLFxyXG4gICAgICAvZW4gZGlyZWN0by9pLFxyXG4gICAgICAvbGl2ZS9pLFxyXG4gICAgICAvc3RyZWFtaW5nL2lcclxuICAgIF07XHJcblxyXG4gICAgbGV0IGhhc0xpdmVDb250ZW50ID0gZmFsc2U7XHJcbiAgICBmb3IgKGNvbnN0IGluZGljYXRvciBvZiBsaXZlSW5kaWNhdG9ycykge1xyXG4gICAgICBpZiAoaW5kaWNhdG9yLnRlc3QoaHRtbCkpIHtcclxuICAgICAgICBoYXNMaXZlQ29udGVudCA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaGFzTGl2ZUNvbnRlbnQpIHtcclxuICAgICAgLy8gQnVzY2FyIGN1YWxxdWllciB2aWRlbyBlbiBsYSBww6FnaW5hIHByaW5jaXBhbFxyXG4gICAgICBjb25zdCB2aWRlb01hdGNoID0gaHRtbC5tYXRjaCgvXFwvd2F0Y2hcXD92PShbYS16QS1aMC05Xy1dezExfSkvKTtcclxuICAgICAgaWYgKHZpZGVvTWF0Y2gpIHtcclxuICAgICAgICBjb25zdCBsaXZlU3RyZWFtVXJsID0gYGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9JHt2aWRlb01hdGNoWzFdfWA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBQb3NpYmxlIHN0cmVhbSBkZXRlY3RhZG8gKHZlcmlmaWNhcik6JywgbGl2ZVN0cmVhbVVybCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgbGl2ZVN0cmVhbVVybCxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdQb3NpYmxlIHN0cmVhbSBkZXRlY3RhZG8gKHJlcXVpZXJlIHZlcmlmaWNhY2nDs24pJyxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdGF0dXM6ICdlcnJvcicsXHJcbiAgICAgIG1lc3NhZ2U6ICdObyBzZSBkZXRlY3TDsyBzdHJlYW0gZW4gdml2bycsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBkZXRlY3RhbmRvIHN0cmVhbSBkZXNkZSBjYW5hbDonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcclxuICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3IgZGVzY29ub2NpZG8nLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgdmVyaWZpY2FyIHJlZGlyZWNjaW9uZXMgZGUgVVJMXHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrVXJsUmVkaXJlY3RzKG9yaWdpbmFsVXJsOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflIQgVmVyaWZpY2FuZG8gcmVkaXJlY2Npb25lcyBwYXJhOicsIG9yaWdpbmFsVXJsKTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKG9yaWdpbmFsVXJsLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIwLjAuMC4wIFNhZmFyaS81MzcuMzYnLFxyXG4gICAgICAgICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCwqLyo7cT0wLjgnLFxyXG4gICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZXMtRVMsZXM7cT0wLjksZW47cT0wLjgnLFxyXG4gICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZSwgYnInLFxyXG4gICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLFxyXG4gICAgICAgICdVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzJzogJzEnLFxyXG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJ1xyXG4gICAgICB9LFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICByZWRpcmVjdDogJ2ZvbGxvdycgLy8gU2VndWlyIHJlZGlyZWNjaW9uZXMgYXV0b23DoXRpY2FtZW50ZVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZmluYWxVcmwgPSByZXNwb25zZS51cmw7XHJcbiAgICBcclxuICAgIGlmIChmaW5hbFVybCAhPT0gb3JpZ2luYWxVcmwpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSBSZWRpcmVjY2nDs24gZGV0ZWN0YWRhOicsIG9yaWdpbmFsVXJsLCAnLT4nLCBmaW5hbFVybCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIHJlZGlyZWN0ZWRVcmw6IGZpbmFsVXJsLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdSZWRpcmVjY2nDs24gZGV0ZWN0YWRhJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaSBubyBoYXkgcmVkaXJlY2Npw7NuIEhUVFAsIGJ1c2NhciByZWRpcmVjY2lvbmVzIGVuIEphdmFTY3JpcHQvTWV0YSB0YWdzXHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgXHJcbiAgICAvLyBCdXNjYXIgbWV0YSByZWZyZXNoXHJcbiAgICBjb25zdCBtZXRhUmVmcmVzaE1hdGNoID0gaHRtbC5tYXRjaCgvPG1ldGFbXj5dKmh0dHAtZXF1aXY9W1wiJ11yZWZyZXNoW1wiJ11bXj5dKmNvbnRlbnQ9W1wiJ11bXlwiJ10qdXJsPShbXlwiJ10rKVtcIiddL2kpO1xyXG4gICAgaWYgKG1ldGFSZWZyZXNoTWF0Y2gpIHtcclxuICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSBtZXRhUmVmcmVzaE1hdGNoWzFdO1xyXG4gICAgICBpZiAocmVkaXJlY3RVcmwgJiYgcmVkaXJlY3RVcmwgIT09IG9yaWdpbmFsVXJsKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBSZWRpcmVjY2nDs24gbWV0YSByZWZyZXNoIGRldGVjdGFkYTonLCByZWRpcmVjdFVybCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgcmVkaXJlY3RlZFVybDogcmVkaXJlY3RVcmwsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnUmVkaXJlY2Npw7NuIG1ldGEgcmVmcmVzaCBkZXRlY3RhZGEnLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEJ1c2NhciB3aW5kb3cubG9jYXRpb24gcmVkaXJlY3RzXHJcbiAgICBjb25zdCBqc1JlZGlyZWN0TWF0Y2ggPSBodG1sLm1hdGNoKC93aW5kb3dcXC5sb2NhdGlvbig/OlxcLmhyZWYpP1xccyo9XFxzKltcIiddKFteXCInXSspW1wiJ10vaSk7XHJcbiAgICBpZiAoanNSZWRpcmVjdE1hdGNoKSB7XHJcbiAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0ganNSZWRpcmVjdE1hdGNoWzFdO1xyXG4gICAgICBpZiAocmVkaXJlY3RVcmwgJiYgcmVkaXJlY3RVcmwgIT09IG9yaWdpbmFsVXJsKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBSZWRpcmVjY2nDs24gSmF2YVNjcmlwdCBkZXRlY3RhZGE6JywgcmVkaXJlY3RVcmwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICAgIHJlZGlyZWN0ZWRVcmw6IHJlZGlyZWN0VXJsLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1JlZGlyZWNjacOzbiBKYXZhU2NyaXB0IGRldGVjdGFkYScsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgIG1lc3NhZ2U6ICdObyBzZSBkZXRlY3Rhcm9uIHJlZGlyZWNjaW9uZXMnLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgdmVyaWZpY2FuZG8gcmVkaXJlY2Npb25lczonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcclxuICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3IgZGVzY29ub2NpZG8nLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUE9TVCIsInJlcXVlc3QiLCJ1cmwiLCJjaGVja1JlZGlyZWN0cyIsImRldGVjdExpdmVTdHJlYW0iLCJqc29uIiwic3RhdHVzIiwibWVzc2FnZSIsInZpZXdlcnMiLCJpc0xpdmUiLCJ0aXRsZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInlvdXR1YmVSZWdleCIsInRlc3QiLCJjb25zb2xlIiwibG9nIiwiZGV0ZWN0TGl2ZVN0cmVhbUZyb21DaGFubmVsIiwiY2hlY2tVcmxSZWRpcmVjdHMiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm1ldGhvZCIsIm9rIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwiaHRtbCIsInRleHQiLCJyZXN1bHQiLCJleHRyYWN0WW91VHViZURhdGEiLCJlcnJvciIsInRpdGxlTWF0Y2giLCJtYXRjaCIsInJlcGxhY2UiLCJ0cmltIiwibGl2ZUluZGljYXRvcnMiLCJzb21lIiwicGF0dGVybiIsInZpZXdlclBhdHRlcm5zIiwidmlld2VyVGV4dCIsInBhcnNlVmlld2VyQ291bnQiLCJqc29uTWF0Y2hlcyIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJmaW5kVmlld2Vyc0luT2JqZWN0IiwiZSIsIndhcm4iLCJ2aWV3UGF0dGVybnMiLCJvYmoiLCJrZXlzIiwia2V5IiwidmFsdWUiLCJzaW1wbGVUZXh0IiwicnVucyIsInBhcnNlZCIsInRvU3RyaW5nIiwiT2JqZWN0IiwidmFsdWVzIiwibXVsdGlwbGllcnMiLCJudW1iZXIiLCJwYXJzZUZsb2F0Iiwic3VmZml4IiwidG9VcHBlckNhc2UiLCJNYXRoIiwicm91bmQiLCJudW1NYXRjaCIsInBhcnNlSW50IiwiY2hhbm5lbFVybCIsImxpdmVTdHJlYW1QYXR0ZXJucyIsIm1hdGNoZXMiLCJBcnJheSIsImZyb20iLCJtYXRjaEFsbCIsInZpZGVvSWQiLCJsaXZlU3RyZWFtVXJsIiwiaGFzTGl2ZUNvbnRlbnQiLCJpbmRpY2F0b3IiLCJ2aWRlb01hdGNoIiwib3JpZ2luYWxVcmwiLCJyZWRpcmVjdCIsImZpbmFsVXJsIiwicmVkaXJlY3RlZFVybCIsIm1ldGFSZWZyZXNoTWF0Y2giLCJyZWRpcmVjdFVybCIsImpzUmVkaXJlY3RNYXRjaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/youtube-scraper/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube-scraper%2Froute&page=%2Fapi%2Fyoutube-scraper%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-scraper%2Froute.ts&appDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGerman%5CDesktop%5CDashboard%20Viewers-%20LaCasa%5Cyoutube-viewers-lacasa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();