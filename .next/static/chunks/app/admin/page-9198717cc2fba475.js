(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{67:function(){},2061:function(){},9619:function(e,t,a){Promise.resolve().then(a.bind(a,8788))},794:function(e,t,a){"use strict";a.d(t,{F:function(){return l},f:function(){return o}});var r=a(7437),s=a(2265);let n=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{document.documentElement.setAttribute("data-theme",a)},[a]),(0,r.jsx)(n.Provider,{value:{theme:a,toggleTheme:()=>{o(e=>"light"===e?"dark":"light")}},children:t})},l=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}},8788:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var r=a(7437),s=a(2265),n=a(998),o=a(7800);let l=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[a,n]=(0,s.useState)(()=>localStorage.getItem("link")||""),[i,d]=(0,s.useState)(()=>{let e=localStorage.getItem("blocks");return e?JSON.parse(e):[{status:[],intervalId:null,isPaused:!1,currentOperation:0,state:"idle",totalOperations:35,title:"Programa: Tengo capturas",totalViewers:0},{status:[],intervalId:null,isPaused:!1,currentOperation:0,state:"idle",totalOperations:10,title:"Programa: Rumis",totalViewers:0},{status:[],intervalId:null,isPaused:!1,currentOperation:0,state:"idle",totalOperations:15,title:"Programa: Circuito cerrado",totalViewers:0},{status:[],intervalId:null,isPaused:!1,currentOperation:0,state:"idle",totalOperations:20,title:"Programa: Madres 5G",totalViewers:0}]});(0,s.useEffect)(()=>{localStorage.setItem("blocks",JSON.stringify(i))},[i]),(0,s.useEffect)(()=>{localStorage.setItem("link",a)},[a]),(0,s.useEffect)(()=>{let e=e=>{let t=i.map(e=>"running"===e.state?(clearInterval(e.intervalId),{...e,intervalId:null,isPaused:!0,state:"paused"}):e);localStorage.setItem("blocks",JSON.stringify(t)),localStorage.setItem("link",a),d(t)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[i,a]);let c=async e=>{try{let t=await fetch("http://top4smm.com/api.php?key=r6oPvhkIA5Pkbt4p&act=order_info&id=".concat(e));return(await t.json()).status}catch(e){return console.error("Error fetching order status:",e),"Error"}},u=e=>{switch(e){case 336:return 120;case 337:return 150;case 334:return 60;case 335:return 90;case 338:return 180;case 459:return 240;default:return 0}},m=e=>{let t=new URLSearchParams(e.split("?")[1]);return{count:parseInt(t.get("count")||"0",10),serviceId:parseInt(t.get("service_id")||"0",10)}},h=e=>{let t=e.status.map(e=>({Estado:e.status,Mensaje:e.message,Timestamp:e.timestamp,"Order ID":e.orderId,"Order Status":e.orderStatus,"Duraci\xf3n (minutos)":e.duration,"Cantidad de Viewers":e.count,"Costo de la Operaci\xf3n":e.details.sum,...e.details})),a=new Date("1970-01-01T10:25:00Z"),r=new Date("1970-01-01T23:00:00Z"),s=[],n=new Date(a);for(;n<=r;)s.push({Hora:n.toISOString().substr(11,5)}),n=new Date(n.getTime()+6e4);let l={Hora:"Costo"};e.status.forEach(e=>{if("success"===e.status&&e.count&&e.timestamp){let t=new Date("1970-01-01T".concat(e.timestamp,"Z")).toISOString().substr(11,5),a=e.duration||0,r="Operaci\xf3n ".concat(e.orderId);r in l||(l[r]=e.details.sum||0),s.forEach(e=>{r in e||(e[r]="")});let n=s.findIndex(e=>e.Hora===t);if(-1!==n)for(let t=0;t<a&&n+t<s.length;t++)s[n+t][r]=e.count}});let i=[l,...s],d=o.P6.json_to_sheet(t),c=o.P6.json_to_sheet(i),u=o.P6.book_new();o.P6.book_append_sheet(u,d,"Resumen de Operaciones"),o.P6.book_append_sheet(u,c,"Viewers por Minuto"),o.NC(u,"".concat(e.title,".xlsx"))},b=()=>new Promise(e=>{setTimeout(()=>{e({res:{status:"ok",balance:"131.29568",order_id:Math.floor(1e6*Math.random()),start_count:"0",sum:8.37,service_id:335}})},1e3)}),g=async e=>{if(a&&"running"===i[e].state)try{var t,r,s;let{count:n,serviceId:o}=m(a),l=await b(),g=new Date().toLocaleTimeString(),x=u(o)||90;console.log("Block ".concat(e+1,", Operation ").concat(i[e].currentOperation+1,":"),l);let p={status:(null===(t=l.res)||void 0===t?void 0:t.status)==="ok"?"success":"error",message:(null===(r=l.res)||void 0===r?void 0:r.status)==="ok"?"Operaci\xf3n exitosa":"Error en la operaci\xf3n",details:l.res||l.error,timestamp:g,orderId:null===(s=l.res)||void 0===s?void 0:s.order_id,duration:x,count:n||100},f=[...i];if(f[e].status.push(p),f[e].currentOperation+=1,"success"===p.status){let t=f[e].totalViewers+(p.count||0);f[e].totalViewers=t;let a=setInterval(async()=>{let t=await c(p.orderId),a=[...f],r=a[e].status.findIndex(e=>e.orderId===p.orderId);-1!==r&&(a[e].status[r].orderStatus=t,d(a))},6e4);f[e].intervalId=a}f[e].currentOperation>=f[e].totalOperations&&(clearInterval(f[e].intervalId),f[e].intervalId=null,f[e].state="completed",h(f[e])),d(f)}catch(r){console.log("Block ".concat(e+1,", Operation ").concat(i[e].currentOperation+1,":"),r);let t={status:"error",message:"Error en la operaci\xf3n",details:r,timestamp:new Date().toLocaleTimeString(),duration:90},a=[...i];a[e].status.push(t),a[e].currentOperation+=1,a[e].currentOperation>=a[e].totalOperations&&(clearInterval(a[e].intervalId),a[e].intervalId=null,a[e].state="completed",h(a[e])),d(a)}},x=e=>{let t=setInterval(()=>g(e),6e4),a=[...i];a[e].intervalId=t,a[e].isPaused=!1,a[e].state="running",d(a),g(e)};return(0,r.jsx)(l.Provider,{value:{blocks:i,link:a,setLink:n,startBlock:x,pauseBlock:e=>{let t=[...i];t[e].intervalId&&(clearInterval(t[e].intervalId),t[e].intervalId=null,t[e].isPaused=!0,t[e].state="paused"),d(t)},resumeBlock:e=>{x(e)},finalizeBlock:e=>{let t=[...i];t[e].intervalId&&(clearInterval(t[e].intervalId),t[e].intervalId=null),t[e].state="completed",h(t[e]),d(t)},resetBlock:e=>{let t=[...i];t[e].intervalId&&(clearInterval(t[e].intervalId),t[e].intervalId=null),t[e]={status:[],intervalId:null,isPaused:!1,currentOperation:0,state:"idle",totalOperations:t[e].totalOperations,title:t[e].title,totalViewers:0},d(t)},generateExcel:h},children:t})},d=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useBlocks must be used within a BlocksProvider");return e};var c=a(7346),u=a(5211),m=()=>(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-300 rounded mb-4"}),(0,r.jsx)("div",{className:"h-64 bg-gray-300 rounded"})]});u.kL.register(u.uw,u.f$,u.ZL,u.Dx,u.u,u.De);var h=e=>{let{data:t,theme:a,startDate:n,endDate:o,fromProgramCards:l}=e,[i,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[b,g]=(0,s.useState)(n),[x,p]=(0,s.useState)(o),f=async()=>{if(b&&x){h(!0);let e=await fetch("/api/query?start=".concat(b,"&end=").concat(x));e.ok?d(await e.json()):console.error("Error al consultar los datos"),h(!1)}};(0,s.useEffect)(()=>{l&&f()},[l]);let v=i.reduce((e,t)=>(e[t.programa]||(e[t.programa]=[]),e[t.programa].push(t),e),{}),w=e=>{let t=new Date(e);return t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),t.toISOString().split("T")[0]};return(0,r.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[(0,r.jsx)("label",{className:"mb-2 text-sm font-bold",children:"Seleccionar rango de fechas:"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"date",value:b,onChange:e=>g(e.target.value),className:"border rounded-lg p-2 ".concat("dark"===a?"bg-gray-800 text-white":"bg-white text-black")}),(0,r.jsx)("input",{type:"date",value:x,onChange:e=>p(e.target.value),className:"border rounded-lg p-2 ".concat("dark"===a?"bg-gray-800 text-white":"bg-white text-black")}),(0,r.jsx)("button",{onClick:()=>{d([]),f()},className:"bg-blue-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-blue-600 transition duration-300",children:"Consultar"})]})]}),(0,r.jsx)("div",{className:"mt-8 w-full flex flex-col gap-4 animate-fade-in",children:u?(0,r.jsx)(m,{}):Object.keys(v).map(e=>{let t=v[e],s=t.reduce((e,t)=>e+t.real,0),n=t.reduce((e,t)=>e+t.chimi,0),o=Math.round(s/t.length),l=Math.round((s+n)/t.length),i=Math.max(...t.map(e=>e.real)),d=Math.max(...t.map(e=>e.total));return(0,r.jsxs)("div",{className:"shadow-md rounded-lg p-4 w-full ".concat("dark"===a?"bg-gray-800 text-white":"bg-white text-black"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:e}),(0,r.jsxs)("p",{className:"text-lg",children:[b," - ",x]})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-2 mb-4",children:[" ",(0,r.jsxs)("div",{className:"p-4 rounded-lg shadow-md ".concat("dark"===a?"bg-gray-700 text-white":"bg-gray-100 text-black"," flex flex-col items-center justify-center"),children:[(0,r.jsx)("p",{className:"font-bold",children:"Media Real"}),(0,r.jsx)("p",{className:"text-xl",children:o})," "]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg shadow-md ".concat("dark"===a?"bg-gray-700 text-white":"bg-gray-100 text-black"," flex flex-col items-center justify-center"),children:[(0,r.jsx)("p",{className:"font-bold",children:"Media Total"}),(0,r.jsx)("p",{className:"text-xl",children:l})," "]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg shadow-md ".concat("dark"===a?"bg-gray-700 text-white":"bg-gray-100 text-black"," flex flex-col items-center justify-center"),children:[(0,r.jsx)("p",{className:"font-bold",children:"Pico M\xe1s Alto Real"}),(0,r.jsx)("p",{className:"text-xl",children:i})," "]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg shadow-md ".concat("dark"===a?"bg-gray-700 text-white":"bg-gray-100 text-black"," flex flex-col items-center justify-center"),children:[(0,r.jsx)("p",{className:"font-bold",children:"Pico M\xe1s Alto Total"}),(0,r.jsx)("p",{className:"text-xl",children:d})," "]})]}),(0,r.jsx)("div",{className:"relative h-96 w-full",children:(0,r.jsx)(c.$Q,{data:{labels:t.map(e=>e.hora),datasets:[{label:"Real",data:t.map(e=>e.real),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Chimi",data:t.map(e=>e.chimi),backgroundColor:"rgba(255, 159, 64, 0.2)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{title:function(e){return"Hora: ".concat(e[0].label)},label:function(e){let a=t[e.dataIndex],r=a.real,s=a.chimi,n=a.total,o=(r/n*100).toFixed(2)+"%",l=(s/n*100).toFixed(2)+"%",i=w(a.fecha);return"Real"===e.dataset.label?["Fecha: ".concat(i),"Total Viewers: ".concat(n),"Real: ".concat(r," (").concat(o,")")]:["Fecha: ".concat(i),"Total Viewers: ".concat(n),"Chimi: ".concat(s," (").concat(l,")")]},labelColor:function(e){return"Real"===e.dataset.label?{borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)"}:(e.dataset.label,{borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)"})}}}},scales:{x:{stacked:!0,ticks:{font:{size:14}}},y:{stacked:!0,ticks:{font:{size:14}},grid:{color:"rgba(0, 0, 0, 0.2)",lineWidth:2}}}}})})]},e)})}),(0,r.jsx)("button",{onClick:()=>{d([]),g(""),p("")},className:"bg-red-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-red-600 transition duration-300 mt-4",children:"Consultar otra fecha"})]})},b=a(794);let g=s.forwardRef(function(e,t){let{title:a,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),a?s.createElement("title",{id:r},a):null,s.createElement("path",{fillRule:"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z",clipRule:"evenodd"}))}),x=s.forwardRef(function(e,t){let{title:a,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),a?s.createElement("title",{id:r},a):null,s.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))});function p(e){var t;let{onFileUpload:a}=e,{data:l}=(0,n.useSession)(),{theme:i}=(0,b.F)(),[d,c]=(0,s.useState)([]),[u,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),[f,v]=(0,s.useState)(!0),[w,j]=(0,s.useState)(null),[y,N]=(0,s.useState)(""),[k,C]=(0,s.useState)(!1),[S,P]=(0,s.useState)(!1);if(!l)return(0,r.jsx)("p",{children:"Por favor, inicia sesi\xf3n para subir archivos."});if((null===(t=l.user)||void 0===t?void 0:t.rol)!=="admin")return(0,r.jsx)("p",{children:"No tienes permisos para subir archivos."});let I=(e,t)=>{let a=t.split("-")[2].padStart(2,"0"),r=e.Sheets[a];if(!r){alert('La hoja con el nombre "'.concat(a,'" no existe.')),v(!1);return}v(!0);let s=o.P6.sheet_to_json(r,{header:1}),n=[],l="",i=[];s.forEach((e,a)=>{if(1===e.length&&e[0])l&&i.length>0&&!i.every(e=>0===e.real&&0===e.chimi&&0===e.total)&&n.push(...i),l=e[0],i=[];else if(e.length>1&&l&&"Hora"!==e[0]&&"Real"!==e[1]&&"Chimi"!==e[2]&&"Total"!==e[3]){let a={programa:l,hora:e[0],real:e[1],chimi:e[2],total:e[3],fecha:t?new Date(t).toISOString():""};i.push(a)}}),l&&i.length>0&&!i.every(e=>0===e.real&&0===e.chimi&&0===e.total)&&n.push(...i),console.log("Datos procesados:",n),c(n),m(!0)},M=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];P(!0);let t=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:d,confirm:e})}),a=await t.json();if(P(!1),a.confirm&&!e)N(a.message),C(!0);else if(e){let e=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:d,confirm:!0})});N((await e.json()).message),C(!1)}else N(a.message)};return(0,r.jsxs)("div",{className:"flex flex-col items-center ".concat("dark"===i?"bg-gray-800":"bg-white"," p-6 rounded-lg shadow-md w-full max-w-md"),children:[(0,r.jsx)("label",{className:"mb-2 text-lg font-semibold",children:"Selecciona la fecha de los datos a cargar:"}),(0,r.jsx)("input",{type:"date",value:h,onChange:e=>{let t=e.target.value;p(t),w&&I(w,t)},className:"mb-4 p-2 border rounded-lg ".concat("dark"===i?"bg-gray-800 text-white border-gray-600":"bg-white text-black border-gray-300")}),(0,r.jsx)("label",{className:"mb-2 text-lg font-semibold",children:"Selecciona el archivo a cargar:"}),(0,r.jsx)("input",{type:"file",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=async e=>{var t;let a=new Uint8Array(null===(t=e.target)||void 0===t?void 0:t.result),r=o.ij(a,{type:"array"});j(r),I(r,h)},r.readAsArrayBuffer(a)},className:"mb-4 p-2 border rounded-lg ".concat("dark"===i?"bg-gray-800 text-white border-gray-600":"bg-white text-black border-gray-300")}),u&&f&&(0,r.jsx)("button",{onClick:()=>M(),className:"bg-blue-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 mt-4",children:"Cargar Datos"}),S&&(0,r.jsxs)("div",{className:"mt-4 p-4 ".concat("dark"===i?"bg-gray-700":"bg-blue-100"," border ").concat("dark"===i?"border-gray-600":"border-blue-400"," rounded-lg flex items-center"),children:[(0,r.jsx)(g,{className:"h-6 w-6 text-blue-500 animate-spin mr-2"}),(0,r.jsx)("p",{className:"".concat("dark"===i?"text-white":"text-black"),children:"Validando datos..."})]}),y&&(0,r.jsxs)("div",{className:"mt-4 p-4 ".concat(y.includes("exitosamente")?"bg-green-100 border-green-400":"bg-yellow-100 border-yellow-400"," border rounded-lg"),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("p",{className:"".concat("text-black"),children:y}),y.includes("exitosamente")&&(0,r.jsx)(x,{className:"h-6 w-6 text-green-500 ml-2"})]}),k&&(0,r.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,r.jsx)("button",{onClick:()=>M(!0),className:"bg-red-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-red-600 transition duration-300",children:"Confirmar"}),(0,r.jsx)("button",{onClick:()=>{N(""),C(!1)},className:"bg-gray-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-gray-600 transition duration-300",children:"Cancelar"})]})]})]})}function f(e){let{onFileUpload:t}=e,[a,n]=(0,s.useState)(null),[l,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),{theme:f}=(0,b.F)(),v=e=>e.replace(/^'|'$/g,""),w=async()=>{if(!a)return;p(!0);let e=new FileReader;e.onload=async e=>{var a;let r=new Uint8Array(null===(a=e.target)||void 0===a?void 0:a.result),s=o.ij(r,{type:"array"}),n=s.SheetNames[0],l=s.Sheets[n],u=o.P6.sheet_to_json(l,{header:1}),h=u[0].map(e=>v(e)),b=u.slice(1).map(e=>{let t=e.map(e=>v(e)),a=Object.fromEntries(h.map((e,a)=>[e,t[a]]));if(!a.date||!a.hour)return console.error("Datos inv\xe1lidos:",a),null;let[r,s]=a.date.split(" ");return{date:r,hour:a.hour,luzu:Number(a.luzu),olga:Number(a.olga),gelatina:Number(a.gelatina),blender:Number(a.blender),lacasa:Number(a.lacasa),vorterix:Number(a.vorterix),bondi:Number(a.bondi),carajo:Number(a.carajo),azz:Number(a.azz)}}).filter(e=>null!==e);t(b);let g=await fetch("/api/uploadExcel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:b,confirmDelete:d})}),x=await g.json();p(!1),g.ok?x.confirmDelete?(i(x.message),c(!0)):(console.log("Datos subidos correctamente"),i(null),c(!1),m("Datos subidos correctamente")):console.error("Error al subir los datos")},e.readAsArrayBuffer(a)},j=async()=>{if(!a)return;let e=new FileReader;e.onload=async e=>{var a;let r=new Uint8Array(null===(a=e.target)||void 0===a?void 0:a.result),s=o.ij(r,{type:"array"}),n=s.SheetNames[0],l=s.Sheets[n],d=o.P6.sheet_to_json(l,{header:1}),u=d[0].map(e=>v(e)),h=d.slice(1).map(e=>{let t=e.map(e=>v(e)),a=Object.fromEntries(u.map((e,a)=>[e,t[a]]));if(!a.date||!a.hour)return console.error("Datos inv\xe1lidos:",a),null;let[r,s]=a.date.split(" ");return{date:r,hour:a.hour,luzu:Number(a.luzu),olga:Number(a.olga),gelatina:Number(a.gelatina),blender:Number(a.blender),lacasa:Number(a.lacasa),vorterix:Number(a.vorterix),bondi:Number(a.bondi),carajo:Number(a.carajo),azz:Number(a.azz)}}).filter(e=>null!==e);t(h),(await fetch("/api/uploadExcel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:h,confirmDelete:!0})})).ok?(console.log("Datos subidos correctamente"),i(null),c(!1),m("Datos subidos correctamente")):console.error("Error al subir los datos")},e.readAsArrayBuffer(a)};return(0,r.jsxs)("div",{className:"flex flex-col items-center ".concat("dark"===f?"bg-gray-800":"bg-white"," p-6 rounded-lg shadow-md w-full max-w-md"),children:[(0,r.jsx)("input",{type:"file",onChange:e=>{var t;n((null===(t=e.target.files)||void 0===t?void 0:t[0])||null),m(null)},className:"mb-4 p-2 border ".concat("dark"===f?"border-gray-600 text-white bg-gray-700":"border-gray-300 text-black bg-gray-100"," rounded-lg w-full")}),(0,r.jsx)("button",{onClick:w,className:"bg-green-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-green-600 transition duration-300",children:"Upload"}),h&&(0,r.jsxs)("div",{className:"mt-4 p-4 ".concat("dark"===f?"bg-gray-700":"bg-blue-100"," border ").concat("dark"===f?"border-gray-600":"border-blue-400"," rounded-lg flex items-center"),children:[(0,r.jsx)(g,{className:"h-6 w-6 text-blue-500 animate-spin mr-2"}),(0,r.jsx)("p",{className:"".concat("dark"===f?"text-white":"text-black"),children:"Validando datos..."})]}),l&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-yellow-200 text-yellow-800 rounded-lg",children:[(0,r.jsx)("p",{children:l}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:j,className:"bg-red-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-red-600 transition duration-300",children:"Confirmar"}),(0,r.jsx)("button",{onClick:()=>{i(null),c(!1)},className:"bg-gray-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-gray-600 transition duration-300",children:"Cancelar"})]})]}),u&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-green-200 text-green-800 rounded-lg flex items-center",children:[(0,r.jsx)("p",{children:u}),(0,r.jsx)(x,{className:"h-6 w-6 text-green-500 ml-2"})]})]})}var v=a(3636),w=a(6920),j=a(5079),y=a(8420),N=a(2469),k=a(4192),C=a(3107),S=a(4546);let P={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xeda",other:"{{count}} d\xedas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xf1o",other:"alrededor de {{count}} a\xf1os"},xYears:{one:"1 a\xf1o",other:"{{count}} a\xf1os"},overXYears:{one:"m\xe1s de 1 a\xf1o",other:"m\xe1s de {{count}} a\xf1os"},almostXYears:{one:"casi 1 a\xf1o",other:"casi {{count}} a\xf1os"}};var I=a(566);let M={date:(0,I.l)({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,I.l)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,I.l)({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},O={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xf1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},D={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xf1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"};var E=a(6940);let T={ordinalNumber:(e,t)=>Number(e)+"\xba",era:(0,E.Y)({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xe9s de cristo"]},defaultWidth:"wide"}),quarter:(0,E.Y)({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:(0,E.Y)({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:(0,E.Y)({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xe1"],abbreviated:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],wide:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:(0,E.Y)({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})};var _=a(9211),W=a(9479);let z={code:"es",formatDistance:(e,t,a)=>{let r;let s=P[e];return(r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null==a?void 0:a.addSuffix)?a.comparison&&a.comparison>0?"en "+r:"hace "+r:r},formatLong:M,formatRelative:(e,t,a,r)=>1!==t.getHours()?D[e]:O[e],localize:T,match:{ordinalNumber:(0,_.y)({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,W.t)({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:(0,W.t)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,W.t)({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:(0,W.t)({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,W.t)({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};u.kL.register(u.uw,u.f$,u.od,u.jn,u.Dx,u.u,u.De,u.Gu);var A=e=>{let{theme:t,onDateSelect:a,selectedDate:n}=e,[o,l]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)(new Date),[b,g]=(0,s.useState)([]),x=async(e,t)=>{d(!0);let a=await fetch("/api/queryMaxViewers?start=".concat((0,y.WU)(e,"yyyy-MM-dd"),"&end=").concat((0,y.WU)(t,"yyyy-MM-dd")));if(a.ok){let e=await a.json();console.log("Datos recibidos:",e),l(e)}else console.error("Error al consultar los datos");d(!1)};(0,s.useEffect)(()=>{x((0,N.N)(u),(0,k.V)(u))},[u]);let p=async e=>{a(e),d(!0);let t=await fetch("/api/query?start=".concat(e,"&end=").concat(e));t.ok?g(await t.json()):console.error("Error al consultar los datos"),d(!1)},f=e=>(function(e,t){let a=(0,S.Q)(e.start),r=(0,S.Q)(e.end),s=+a>+r,n=s?+a:+r,o=s?r:a;o.setHours(0,0,0,0);let l=1;l<0&&(l=-l,s=!s);let i=[];for(;+o<=n;)i.push((0,S.Q)(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return s?i.reverse():i})({start:(0,N.N)(e),end:(0,k.V)(e)}).filter(e=>{let t=(0,S.Q)(e).getDay();return t>=1&&t<=5}),v=e=>e.charAt(0).toUpperCase()+e.slice(1);return(0,r.jsx)("div",{className:"flex flex-col items-center w-full",children:n?(0,r.jsx)(h,{data:b,theme:t,startDate:n,endDate:n,fromProgramCards:!0}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("button",{onClick:()=>{m((0,C.z)(u,-1))},className:"py-1 px-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 ".concat("dark"===t?"bg-black text-white border border-[#444]":"bg-white text-black border border-[#444]"),children:"Mes Anterior"}),(0,r.jsx)("h2",{className:"text-xl font-bold mx-4",children:(0,y.WU)(u,"MMMM yyyy",{locale:z})}),(0,r.jsx)("button",{onClick:()=>{m((0,C.z)(u,1))},className:"py-1 px-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 ".concat("dark"===t?"bg-black text-white border border-[#444]":"bg-white text-black border border-[#444]"),children:"Mes Siguiente"})]}),i?(0,r.jsx)("p",{children:"Cargando..."}):(0,r.jsx)("div",{className:"flex flex-col items-center w-full",children:(()=>{let e=f(u).map(e=>{let t=e.toISOString().split("T")[0],a=o.find(e=>e.fecha.split("T")[0]===t)||{avg_total:0,dayData:[]};return{fecha:e,avg_total:a.avg_total,dayData:a.dayData||[]}}),a=[];for(let t=0;t<e.length;t+=5)a.push(e.slice(t,t+5));return a.map((e,a)=>(0,r.jsx)("div",{className:"flex justify-center w-full mb-4",children:e.map(e=>{let a=new Date(e.fecha),s=(0,y.WU)(a,"dd/MM/yyyy"),n=v((0,y.WU)(a,"EEEE",{locale:z})),o=e.dayData.sort((e,t)=>e.hora.localeCompare(t.hora)),l={labels:o.map(e=>e.hora),datasets:[{label:"Total",data:o.map(e=>e.total),backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,pointRadius:0,fill:!0}]},i=a.toISOString().split("T")[0];return(0,r.jsxs)("div",{className:"shadow-md rounded-lg p-2 w-1/5 ".concat("dark"===t?"bg-black text-white border border-[#444]":"bg-white text-black border border-[#444]"," m-2 cursor-pointer"),style:{minWidth:"200px",maxWidth:"200px",height:"300px",position:"relative"},onClick:()=>p(i),children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between items-center mb-2",children:[(0,r.jsx)("h2",{className:"text-sm font-bold",children:"LaCasa"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:"".concat(n," - ").concat(s)})]}),(0,r.jsx)("div",{className:"flex justify-center gap-1 mb-2",children:(0,r.jsxs)("div",{className:"p-2 rounded-lg shadow-md ".concat("dark"===t?"bg-gray-700 text-white":"bg-gray-100 text-black"," flex flex-col items-center justify-center"),children:[(0,r.jsx)("p",{className:"font-bold text-xs",children:"Media Total del D\xeda"}),(0,r.jsx)("p",{className:"text-xs",children:e.avg_total>0?e.avg_total.toFixed(2):"Sin datos"})," "]})}),(0,r.jsx)("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",top:"auto",height:"150px"},children:o.length>0?(0,r.jsx)(c.x1,{data:l,options:{maintainAspectRatio:!1,scales:{x:{display:!1},y:{display:!1}},plugins:{legend:{display:!1}},layout:{padding:{left:0,right:0,top:0,bottom:0}}}}):(0,r.jsx)("p",{className:"text-xs text-center",children:"Sin gr\xe1fico"})})]},s)})},a))})()})]})})};a(3062);var V=()=>{let{blocks:e,link:t,setLink:a,startBlock:n,pauseBlock:l,resumeBlock:i,finalizeBlock:c,resetBlock:u,generateExcel:m}=d(),{theme:h}=(0,b.F)(),[g,x]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1),[v,w]=(0,s.useState)(null),j=e=>{a(e)},y=e.reduce((e,t)=>e+t.totalViewers,0);return(0,r.jsxs)("div",{className:"viewers-container",children:[(0,r.jsx)("input",{type:"text",value:t,onChange:e=>j(e.target.value),placeholder:"Ingrese el enlace de YouTube",className:"input-link ".concat(h)}),(0,r.jsxs)("div",{className:"total-viewers-header",children:["Total de espectadores cargado: ",y]}),(0,r.jsx)("button",{onClick:()=>f(!0),className:"upload-button",children:"Subir Excel"}),(0,r.jsx)("div",{className:"blocks-container",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"block ".concat(h),children:[(0,r.jsx)("h2",{className:"block-title",children:e.title}),("paused"===e.state||"completed"===e.state)&&(0,r.jsx)("button",{onClick:()=>m(e),className:"download-icon",children:(0,r.jsx)("span",{className:"icon-download"})}),(0,r.jsx)("div",{className:"status",style:{maxHeight:"200px",overflowY:"scroll"},children:Array.from({length:e.totalOperations}).map((t,a)=>(0,r.jsxs)("div",{className:"status-item",children:["Operaci\xf3n ".concat(a+1,": "),e.status[a]?(0,r.jsxs)(r.Fragment,{children:["success"===e.status[a].status?(0,r.jsx)("span",{className:"status-success",children:"✔️"}):(0,r.jsx)("span",{className:"status-error",children:"❌"}),(0,r.jsx)("span",{className:"timestamp",children:e.status[a].timestamp}),e.status[a].orderStatus&&(0,r.jsxs)("span",{className:"order-status",children:[" - ",e.status[a].orderStatus]})]}):(0,r.jsx)("span",{className:"status-pending",children:"⏳"})]},a))}),(0,r.jsxs)("div",{className:"block-controls",children:["idle"===e.state&&(0,r.jsx)("button",{onClick:()=>n(t),className:"start-button",children:"Iniciar"}),"running"===e.state&&(0,r.jsx)("button",{onClick:()=>l(t),className:"pause-button",children:"Pausar"}),"paused"===e.state&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>i(t),className:"resume-button",children:"Reanudar"}),(0,r.jsx)("button",{onClick:()=>x({type:"finalizar",index:t}),className:"finalize-button",children:"Finalizar"}),(0,r.jsx)("button",{onClick:()=>x({type:"reiniciar",index:t}),className:"reset-button",children:"Reiniciar"})]}),"completed"===e.state&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"completed-message",children:"Bloque finalizado"}),(0,r.jsx)("button",{onClick:()=>x({type:"reiniciar",index:t}),className:"reset-button",children:"Reiniciar"})]})]}),(0,r.jsxs)("div",{className:"total-viewers",children:["Total de espectadores: ",e.totalViewers]})]},t))}),g&&(0,r.jsx)("div",{className:"warning-modal",children:(0,r.jsxs)("div",{className:"warning-content ".concat(h),children:[(0,r.jsxs)("p",{children:["Estas por ","finalizar"===g.type?"finalizar":"reiniciar"," este bloque de operaciones, si estas seguro presiona continuar"]}),(0,r.jsx)("button",{onClick:()=>{"finalizar"===g.type?c(g.index):u(g.index),x(null)},className:"continue-button",children:"Continuar"}),(0,r.jsx)("button",{onClick:()=>x(null),className:"cancel-button",children:"Cancelar"})]})}),p&&(0,r.jsx)("div",{className:"modal",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsx)("h2",{children:"Subir Excel"}),(0,r.jsx)("input",{type:"file",accept:".xlsx, .xls",onChange:e=>{e.target.files&&w(e.target.files[0])}}),(0,r.jsx)("button",{onClick:()=>{if(!v)return;let e=new FileReader;e.onload=e=>{var t;let a=new Uint8Array(null===(t=e.target)||void 0===t?void 0:t.result),r=o.ij(a,{type:"array"}),s=r.SheetNames[0],n=r.Sheets[s],l=o.P6.sheet_to_json(n,{header:1}).slice(1).map(e=>({Inicio:e[0],Views:e[1],Duracion:e[2],Fin:e[3],Gasto:e[4]})),i=new Date("1970-01-01T10:25:00Z"),d=new Date("1970-01-01T23:00:00Z"),c=[],u=new Date(i);for(;u<=d;)c.push({Hora:u.toISOString().substr(11,5)}),u=new Date(u.getTime()+6e4);let m={Hora:"Costo"};l.forEach((e,t)=>{if(e.Inicio&&"string"==typeof e.Inicio&&e.Views){let[a,r]=e.Inicio.split(":").map(Number),s=new Date(i);s.setHours(a,r,0,0);let n=s.toTimeString().substr(0,5),[o,l]=e.Duracion.split(":").map(Number),d=60*o+l+1,u="Operaci\xf3n ".concat(t+1);m[u]=e.Gasto||0,c.forEach(e=>{u in e||(e[u]="")});let h=c.findIndex(e=>e.Hora===n);if(-1!==h)for(let t=0;t<d&&h+t<c.length;t++)c[h+t][u]=e.Views}});let h=[m,...c],b=o.P6.json_to_sheet(h),g=o.P6.book_new();o.P6.book_append_sheet(g,b,"Viewers por Minuto"),o.NC(g,"ViewersPorMinuto.xlsx")},e.readAsArrayBuffer(v),f(!1)},className:"convert-button",children:"Convertir"}),(0,r.jsx)("button",{onClick:()=>f(!1),className:"close-button",children:"Cerrar"})]})})]})};function R(){let[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),{data:l,status:d}=(0,n.useSession)(),{theme:c,toggleTheme:u}=(0,b.F)(),[m,g]=(0,s.useState)("ProgramCards"),[x,y]=(0,s.useState)(null);if("loading"===d)return(0,r.jsx)(v.Z,{});if(!l)return(0,r.jsx)("p",{children:"Por favor, inicia sesi\xf3n para acceder al dashboard."});let N=l.user;return(0,r.jsx)(i,{children:(0,r.jsxs)("div",{className:"flex flex-col min-h-screen ".concat("dark"===c?"bg-black text-white":"bg-gray-100 text-black"),children:[(0,r.jsxs)("header",{className:"w-full flex justify-between items-center p-4 ".concat("dark"===c?"bg-black":"bg-white shadow-md"),children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Metricas LaCasa"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:u,className:"bg-gray-700 text-white py-2 px-4 rounded-lg shadow-md hover:bg-gray-600 transition duration-300",children:"dark"===c?(0,r.jsx)(w.G,{icon:j.enB}):(0,r.jsx)(w.G,{icon:j.DBF})}),(0,r.jsx)("button",{onClick:()=>(0,n.signOut)({callbackUrl:"/"}),className:"bg-red-500 text-white py-2 px-4 rounded-lg shadow-md hover:bg-red-600 transition duration-300",children:"Cerrar sesi\xf3n"})]})]}),(0,r.jsxs)("div",{className:"flex flex-1",children:[(0,r.jsxs)("aside",{className:"w-64 flex flex-col items-center py-8 ".concat("dark"===c?"bg-black":"bg-white shadow-md"),children:[(0,r.jsx)("button",{onClick:()=>{y(null),g("ProgramCards")},className:"bg-blue-500 text-white py-1 px-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 mb-2 text-sm",children:"Home"}),"admin"===N.rol&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>g("upload"),className:"bg-blue-500 text-white py-1 px-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 mb-2 text-sm",children:"Subir Datos LaCasa"}),(0,r.jsx)("button",{onClick:()=>g("uploadChannels"),className:"bg-blue-500 text-white py-1 px-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 mb-2 text-sm",children:"Subir Datos de Canales"}),(0,r.jsx)("button",{onClick:()=>g("Viewers"),className:"bg-blue-500 text-white py-1 px-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 mb-2 text-sm",children:"Administrar Viewers"})]}),(0,r.jsx)("button",{onClick:()=>g("query"),className:"bg-blue-500 text-white py-1 px-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 text-sm",children:"Metricas de viewers"})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col items-center justify-start p-8",children:["ProgramCards"===m&&(0,r.jsx)(A,{theme:c,onDateSelect:y,selectedDate:x})," ","upload"===m&&(0,r.jsx)(p,{onFileUpload:e=>{t(e)}}),"uploadChannels"===m&&(0,r.jsx)(f,{onFileUpload:e=>{o(e)}}),"Viewers"===m&&(0,r.jsx)(V,{}),"query"===m&&(0,r.jsx)(h,{data:e,theme:c,startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]})," "]})]}),(0,r.jsx)("footer",{className:"w-full p-4 ".concat("dark"===c?"bg-black":"bg-white shadow-md"),children:(0,r.jsx)("p",{className:"text-center",children:"\xa9 2023 Metricas LaCasa. Todos los derechos reservados."})})]})})}},3636:function(e,t,a){"use strict";var r=a(7437);a(2265);var s=a(6648);a(4253),t.Z=()=>(0,r.jsx)("div",{className:"preloader-container",children:(0,r.jsx)("div",{className:"preloader-logo",children:(0,r.jsx)(s.default,{src:"/logo-expansion-verde.png",alt:"Expansion",width:100,height:100,className:"preloader-image"})})})},4253:function(){},3062:function(){}},function(e){e.O(0,[551,229,676,674,425,998,648,167,971,23,744],function(){return e(e.s=9619)}),_N_E=e.O()}]);