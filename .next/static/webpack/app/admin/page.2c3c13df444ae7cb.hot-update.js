"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/page",{

/***/ "(app-pages-browser)/./src/app/components/Block.tsx":
/*!**************************************!*\
  !*** ./src/app/components/Block.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _ThemeContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ThemeContext */ \"(app-pages-browser)/./src/app/ThemeContext.tsx\");\n/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! xlsx */ \"(app-pages-browser)/./node_modules/xlsx/xlsx.mjs\");\n\nvar _s = $RefreshSig$();\n\n\n\nconst Block = (param)=>{\n    let { initialData, link, onTotalViewersChange, blockId, onShowWarning, onShowEditModal } = param;\n    _s();\n    const { theme } = (0,_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme)();\n    // Función para cargar estado desde localStorage\n    const loadBlockState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const savedState = localStorage.getItem(\"blockState_\".concat(blockId));\n        if (savedState) {\n            try {\n                const parsed = JSON.parse(savedState);\n                // Limpiar datos muy antiguos (más de 7 días)\n                if (parsed.lastSaved) {\n                    const lastSavedDate = new Date(parsed.lastSaved);\n                    const now = new Date();\n                    const daysDiff = (now.getTime() - lastSavedDate.getTime()) / (1000 * 3600 * 24);\n                    if (daysDiff > 7) {\n                        localStorage.removeItem(\"blockState_\".concat(blockId));\n                        return null;\n                    }\n                }\n                return parsed;\n            } catch (error) {\n                console.error(\"Error parsing saved block state:\", error);\n                localStorage.removeItem(\"blockState_\".concat(blockId));\n                return null;\n            }\n        }\n        return null;\n    }, [\n        blockId\n    ]);\n    // Estado local del bloque con carga desde localStorage\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        const savedState = loadBlockState();\n        return (savedState === null || savedState === void 0 ? void 0 : savedState.status) || [];\n    });\n    const [intervalId, setIntervalId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPaused, setIsPaused] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentOperation, setCurrentOperation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        const savedState = loadBlockState();\n        return (savedState === null || savedState === void 0 ? void 0 : savedState.currentOperation) || 0;\n    });\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        const savedState = loadBlockState();\n        const savedStateValue = (savedState === null || savedState === void 0 ? void 0 : savedState.state) || \"idle\";\n        // Si estaba 'running' antes de recargar, cambiar a 'paused' para evitar problemas\n        return savedStateValue === \"running\" ? \"paused\" : savedStateValue;\n    });\n    const [totalViewers, setTotalViewers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        const savedState = loadBlockState();\n        return (savedState === null || savedState === void 0 ? void 0 : savedState.totalViewers) || 0;\n    });\n    const [blockData, setBlockData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        const savedState = loadBlockState();\n        return (savedState === null || savedState === void 0 ? void 0 : savedState.blockData) || initialData;\n    });\n    // Función para guardar estado en localStorage\n    const saveBlockState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const stateToSave = {\n            status,\n            currentOperation,\n            state,\n            totalViewers,\n            blockData,\n            lastSaved: new Date().toISOString()\n        };\n        localStorage.setItem(\"blockState_\".concat(blockId), JSON.stringify(stateToSave));\n    }, [\n        blockId,\n        status,\n        currentOperation,\n        state,\n        totalViewers,\n        blockData\n    ]);\n    // Guardar estado cada vez que cambie algún valor importante\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        saveBlockState();\n    }, [\n        status,\n        currentOperation,\n        state,\n        totalViewers,\n        blockData,\n        saveBlockState\n    ]);\n    // Refs para mantener valores actualizados en el intervalo\n    const intervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const lastReportedViewers = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const stateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(state);\n    const currentOperationRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(currentOperation);\n    const blockDataRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(blockData);\n    const statusRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(status);\n    const totalViewersRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(totalViewers);\n    // Actualizar refs cuando cambian los estados\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        stateRef.current = state;\n    }, [\n        state\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        currentOperationRef.current = currentOperation;\n    }, [\n        currentOperation\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        blockDataRef.current = blockData;\n    }, [\n        blockData\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        statusRef.current = status;\n    }, [\n        status\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        totalViewersRef.current = totalViewers;\n    }, [\n        totalViewers\n    ]);\n    // Efecto para auto-start\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (blockData.autoStart && blockData.startTime && state === \"idle\") {\n            const [hours, minutes] = blockData.startTime.split(\":\").map(Number);\n            const now = new Date();\n            const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes, 0, 0);\n            const delay = start.getTime() - now.getTime();\n            if (delay > 0) {\n                const timeoutId = setTimeout(()=>startBlock(), delay);\n                return ()=>clearTimeout(timeoutId);\n            }\n        }\n    }, [\n        blockData.autoStart,\n        blockData.startTime,\n        state\n    ]);\n    // Efecto para notificar cambios en totalViewers (optimizado)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (lastReportedViewers.current !== totalViewers) {\n            onTotalViewersChange(blockId, totalViewers);\n            lastReportedViewers.current = totalViewers;\n        }\n    }, [\n        totalViewers,\n        blockId,\n        onTotalViewersChange\n    ]);\n    // Cleanup al desmontar y antes de cerrar la ventana\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleBeforeUnload = ()=>{\n            if (intervalRef.current) {\n                clearInterval(intervalRef.current);\n            }\n            // Guardar estado final antes de cerrar\n            const finalState = {\n                status: statusRef.current,\n                currentOperation: currentOperationRef.current,\n                state: stateRef.current === \"running\" ? \"paused\" : stateRef.current,\n                totalViewers: totalViewersRef.current,\n                blockData: blockDataRef.current,\n                lastSaved: new Date().toISOString()\n            };\n            localStorage.setItem(\"blockState_\".concat(blockId), JSON.stringify(finalState));\n        };\n        window.addEventListener(\"beforeunload\", handleBeforeUnload);\n        return ()=>{\n            if (intervalRef.current) {\n                clearInterval(intervalRef.current);\n            }\n            window.removeEventListener(\"beforeunload\", handleBeforeUnload);\n        };\n    }, [\n        blockId\n    ]);\n    const getServiceDuration = (serviceId)=>{\n        switch(serviceId){\n            case 336:\n                return 120;\n            case 337:\n                return 150;\n            case 334:\n                return 60;\n            case 335:\n                return 90;\n            case 338:\n                return 180;\n            case 459:\n                return 240;\n            case 460:\n                return 360;\n            case 657:\n                return 480;\n            default:\n                return 0;\n        }\n    };\n    const generateExcel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        // Crear el resumen para el Excel\n        const currentStatus = statusRef.current;\n        const currentBlockData = blockDataRef.current;\n        const summary = currentStatus.map((statusItem)=>{\n            var _statusItem_details_res, _statusItem_details;\n            return {\n                \"Estado\": statusItem.status,\n                \"Mensaje\": statusItem.message,\n                \"Timestamp\": statusItem.timestamp,\n                \"Order ID\": statusItem.orderId,\n                \"Order Status\": statusItem.orderStatus,\n                \"Duraci\\xf3n (minutos)\": statusItem.duration,\n                \"Cantidad de Viewers\": statusItem.count,\n                \"Costo de la Operaci\\xf3n\": ((_statusItem_details = statusItem.details) === null || _statusItem_details === void 0 ? void 0 : (_statusItem_details_res = _statusItem_details.res) === null || _statusItem_details_res === void 0 ? void 0 : _statusItem_details_res.sum) || 0,\n                ...statusItem.details\n            };\n        });\n        // Generar intervalos de tiempo desde las 10:25 AM hasta las 23:00 PM\n        const startTime = new Date(\"1970-01-01T10:25:00Z\");\n        const endTime = new Date(\"1970-01-01T23:00:00Z\");\n        const timeIntervals = [];\n        let currentTime = new Date(startTime);\n        while(currentTime <= endTime){\n            timeIntervals.push({\n                Hora: currentTime.toISOString().substr(11, 5)\n            });\n            currentTime = new Date(currentTime.getTime() + 60000);\n        }\n        const costRow = {\n            Hora: \"Costo\"\n        };\n        currentStatus.forEach((statusItem)=>{\n            if (statusItem.status === \"success\" && statusItem.count && statusItem.timestamp) {\n                // Intentar parsear el timestamp de manera más robusta\n                let startTimeString;\n                try {\n                    // Si el timestamp está en formato HH:MM:SS, extraer solo HH:MM\n                    const timeMatch = statusItem.timestamp.match(/(\\d{1,2}):(\\d{2}):(\\d{2})/);\n                    if (timeMatch) {\n                        const hours = timeMatch[1].padStart(2, \"0\");\n                        const minutes = timeMatch[2];\n                        startTimeString = \"\".concat(hours, \":\").concat(minutes);\n                    } else {\n                        // Si no se puede parsear, usar un valor por defecto\n                        console.warn(\"No se pudo parsear el timestamp:\", statusItem.timestamp);\n                        startTimeString = \"10:25\"; // Valor por defecto\n                    }\n                } catch (error) {\n                    console.error(\"Error parseando timestamp:\", statusItem.timestamp, error);\n                    startTimeString = \"10:25\"; // Valor por defecto\n                }\n                const duration = statusItem.duration || 0;\n                const orderIdColumn = \"Operaci\\xf3n \".concat(statusItem.orderId);\n                if (!(orderIdColumn in costRow)) {\n                    var _statusItem_details_res, _statusItem_details;\n                    costRow[orderIdColumn] = ((_statusItem_details = statusItem.details) === null || _statusItem_details === void 0 ? void 0 : (_statusItem_details_res = _statusItem_details.res) === null || _statusItem_details_res === void 0 ? void 0 : _statusItem_details_res.sum) || 0;\n                }\n                timeIntervals.forEach((interval)=>{\n                    if (!(orderIdColumn in interval)) {\n                        interval[orderIdColumn] = \"\";\n                    }\n                });\n                const startIndex = timeIntervals.findIndex((entry)=>entry.Hora === startTimeString);\n                if (startIndex !== -1) {\n                    for(let i = 0; i < duration && startIndex + i < timeIntervals.length; i++){\n                        timeIntervals[startIndex + i][orderIdColumn] = statusItem.count;\n                    }\n                }\n            }\n        });\n        const allRows = [\n            costRow,\n            ...timeIntervals\n        ];\n        const wsSummary = xlsx__WEBPACK_IMPORTED_MODULE_3__.utils.json_to_sheet(summary);\n        const wsViewers = xlsx__WEBPACK_IMPORTED_MODULE_3__.utils.json_to_sheet(allRows);\n        const wb = xlsx__WEBPACK_IMPORTED_MODULE_3__.utils.book_new();\n        xlsx__WEBPACK_IMPORTED_MODULE_3__.utils.book_append_sheet(wb, wsSummary, \"Resumen de Operaciones\");\n        xlsx__WEBPACK_IMPORTED_MODULE_3__.utils.book_append_sheet(wb, wsViewers, \"Viewers por Minuto\");\n        xlsx__WEBPACK_IMPORTED_MODULE_3__.writeFile(wb, \"\".concat(currentBlockData.title, \".xlsx\"));\n    }, []);\n    const handleApiCall = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        // Verificar condiciones usando refs para valores actuales\n        if (!link || stateRef.current !== \"running\") {\n            console.log(\"\".concat(blockDataRef.current.title, \": No ejecutando API call. Link: \").concat(link, \", State: \").concat(stateRef.current));\n            return;\n        }\n        try {\n            var _data_res, _data_res1;\n            const currentBlockData = blockDataRef.current;\n            const currentOpNum = currentOperationRef.current;\n            const { count, decrement, serviceId, operationType } = currentBlockData;\n            // Calcula la cantidad para la operación actual\n            const operationCount = operationType === \"add\" ? count + (decrement || 0) * currentOpNum : count - (decrement || 0) * currentOpNum;\n            console.log(\"\".concat(currentBlockData.title, \": Iniciando operaci\\xf3n \").concat(currentOpNum + 1, \" con \").concat(operationCount, \" viewers\"));\n            const response = await fetch(\"/api/proxy?service_id=\".concat(serviceId, \"&count=\").concat(operationCount, \"&link=\").concat(link));\n            const data = await response.json();\n            // Generar timestamp en formato consistente HH:MM:SS\n            const now = new Date();\n            const timestamp = now.toTimeString().split(\" \")[0]; // Formato HH:MM:SS\n            const duration = getServiceDuration(serviceId);\n            // Calcular hora de finalización estimada\n            const startTime = now.toISOString();\n            const estimatedEndTime = new Date(now.getTime() + duration * 60 * 1000).toISOString();\n            console.log(\"\".concat(currentBlockData.title, \", Operation \").concat(currentOpNum + 1, \":\"), data);\n            const newStatus = {\n                status: data.error ? \"error\" : \"success\",\n                message: data.error ? \"Error en la operaci\\xf3n\" : \"Operaci\\xf3n exitosa\",\n                details: data,\n                timestamp,\n                orderId: (_data_res = data.res) === null || _data_res === void 0 ? void 0 : _data_res.order_id,\n                duration,\n                count: operationCount,\n                serviceId,\n                cost: ((_data_res1 = data.res) === null || _data_res1 === void 0 ? void 0 : _data_res1.sum) || 0,\n                startTime,\n                estimatedEndTime\n            };\n            setStatus((prev)=>[\n                    ...prev,\n                    newStatus\n                ]);\n            // Guardar en historial global inmediatamente\n            saveToGlobalHistory(newStatus);\n            // Actualizar el total de espectadores\n            if (newStatus.status === \"success\") {\n                setTotalViewers((prev)=>prev + operationCount);\n            }\n            const nextOperation = currentOpNum + 1;\n            setCurrentOperation(nextOperation);\n            if (nextOperation >= currentBlockData.totalOperations) {\n                if (intervalRef.current) {\n                    clearInterval(intervalRef.current);\n                    intervalRef.current = null;\n                    setIntervalId(null);\n                }\n                setState(\"completed\");\n                stateRef.current = \"completed\";\n                // Notificación de bloque completado\n                if ( true && \"Notification\" in window && Notification.permission === \"granted\") {\n                    new Notification(\"\\uD83C\\uDF89 \".concat(currentBlockData.title, \" Completado\"), {\n                        body: \"El bloque se ha completado exitosamente con \".concat(totalViewersRef.current, \" viewers totales\"),\n                        icon: \"/favicon.ico\"\n                    });\n                }\n                // Auto-generar Excel al completar\n                setTimeout(()=>generateExcel(), 1000);\n            }\n        } catch (error) {\n            console.error(\"\".concat(blockDataRef.current.title, \", Operation \").concat(currentOperationRef.current + 1, \":\"), error);\n            const now = new Date();\n            const newStatus = {\n                status: \"error\",\n                message: \"Error en la operaci\\xf3n\",\n                details: error,\n                timestamp: now.toTimeString().split(\" \")[0],\n                duration: 0,\n                cost: 0,\n                startTime: now.toISOString(),\n                estimatedEndTime: now.toISOString()\n            };\n            setStatus((prev)=>[\n                    ...prev,\n                    newStatus\n                ]);\n            // Guardar en historial global inmediatamente\n            saveToGlobalHistory(newStatus);\n            const nextOperation = currentOperationRef.current + 1;\n            setCurrentOperation(nextOperation);\n            if (nextOperation >= blockDataRef.current.totalOperations) {\n                if (intervalRef.current) {\n                    clearInterval(intervalRef.current);\n                    intervalRef.current = null;\n                    setIntervalId(null);\n                }\n                setState(\"completed\");\n                stateRef.current = \"completed\";\n                // Notificación de bloque completado (para casos de error también)\n                if ( true && \"Notification\" in window && Notification.permission === \"granted\") {\n                    new Notification(\"\\uD83C\\uDFC1 \".concat(blockDataRef.current.title, \" Finalizado\"), {\n                        body: \"El bloque ha finalizado (con errores) - Total viewers: \".concat(totalViewersRef.current),\n                        icon: \"/favicon.ico\"\n                    });\n                }\n                setTimeout(()=>generateExcel(), 1000);\n            }\n        }\n    }, [\n        link,\n        generateExcel\n    ]);\n    const startBlock = ()=>{\n        if (state === \"running\") return;\n        setIsPaused(false);\n        setState(\"running\");\n        // Actualizar el ref inmediatamente para que handleApiCall lo detecte\n        stateRef.current = \"running\";\n        // Enviar la primera operación inmediatamente\n        handleApiCall();\n        // Configurar el intervalo para las siguientes operaciones\n        const newIntervalId = setInterval(()=>handleApiCall(), 120000); // 2 minutos\n        intervalRef.current = newIntervalId;\n        setIntervalId(newIntervalId);\n    };\n    const pauseBlock = ()=>{\n        if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n            intervalRef.current = null;\n            setIntervalId(null);\n            setIsPaused(true);\n            setState(\"paused\");\n            // Actualizar el ref inmediatamente\n            stateRef.current = \"paused\";\n        }\n    };\n    const resumeBlock = ()=>{\n        setIsPaused(false);\n        setState(\"running\");\n        // Actualizar el ref inmediatamente\n        stateRef.current = \"running\";\n        // Llamar a la API inmediatamente después de reanudar\n        handleApiCall();\n        // Reiniciar el intervalo\n        const newIntervalId = setInterval(handleApiCall, 120000);\n        intervalRef.current = newIntervalId;\n        setIntervalId(newIntervalId);\n    };\n    const finalizeBlock = ()=>{\n        if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n            intervalRef.current = null;\n            setIntervalId(null);\n        }\n        if (state !== \"completed\") {\n            setState(\"completed\");\n            stateRef.current = \"completed\";\n            // Notificación de finalización manual\n            if ( true && \"Notification\" in window && Notification.permission === \"granted\") {\n                new Notification(\"\\uD83C\\uDFC1 \".concat(blockData.title, \" Finalizado Manualmente\"), {\n                    body: \"El bloque fue finalizado manualmente con \".concat(totalViewers, \" viewers totales\"),\n                    icon: \"/favicon.ico\"\n                });\n            }\n            generateExcel();\n        }\n        setBlockData((prev)=>({\n                ...prev,\n                autoStart: false\n            }));\n    };\n    const resetBlock = ()=>{\n        // CORRIGIDO: No guardamos las operaciones nuevamente porque ya fueron guardadas\n        // cuando se ejecutaron originalmente en handleApiCall (líneas 341 y 377)\n        // Registrar el reset del bloque con las operaciones que se van a perder\n        saveBlockReset();\n        if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n            intervalRef.current = null;\n            setIntervalId(null);\n        }\n        setStatus([]);\n        setIsPaused(false);\n        setCurrentOperation(0);\n        setState(\"idle\");\n        stateRef.current = \"idle\";\n        setTotalViewers(0);\n        setBlockData((prev)=>({\n                ...prev,\n                autoStart: false,\n                startTime: \"\"\n            }));\n        // Limpiar estado guardado del localStorage\n        localStorage.removeItem(\"blockState_\".concat(blockId));\n    };\n    const handleEditModal = ()=>{\n        onShowEditModal(blockId, blockData);\n    };\n    // Función para actualizar blockData desde el componente padre\n    const updateBlockData = (newData)=>{\n        setBlockData(newData);\n    };\n    // Exponer funciones al componente padre mediante efectos\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{\n        window[\"updateBlockData_\".concat(blockId)] = updateBlockData;\n        window[\"finalizeBlock_\".concat(blockId)] = finalizeBlock;\n        window[\"resetBlock_\".concat(blockId)] = resetBlock;\n        return ()=>{\n            delete window[\"updateBlockData_\".concat(blockId)];\n            delete window[\"finalizeBlock_\".concat(blockId)];\n            delete window[\"resetBlock_\".concat(blockId)];\n        };\n    }, [\n        blockId\n    ]);\n    // Función para guardar operación en historial permanente\n    const saveToGlobalHistory = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((operation)=>{\n        const globalHistoryKey = \"globalOperationsHistory\";\n        const existingHistory = localStorage.getItem(globalHistoryKey);\n        let history = [];\n        if (existingHistory) {\n            try {\n                history = JSON.parse(existingHistory);\n            } catch (error) {\n                console.error(\"Error parsing global history:\", error);\n                history = [];\n            }\n        }\n        const historicalOperation = {\n            ...operation,\n            blockId,\n            blockTitle: blockData.title,\n            savedAt: new Date().toISOString()\n        };\n        history.push(historicalOperation);\n        // Mantener solo las últimas 1000 operaciones para evitar problemas de memoria\n        if (history.length > 1000) {\n            history = history.slice(-1000);\n        }\n        localStorage.setItem(globalHistoryKey, JSON.stringify(history));\n    }, [\n        blockId,\n        blockData.title\n    ]);\n    // Función para registrar reset del bloque\n    const saveBlockReset = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const resetHistoryKey = \"blockResetHistory\";\n        const existingResets = localStorage.getItem(resetHistoryKey);\n        let resets = [];\n        if (existingResets) {\n            try {\n                resets = JSON.parse(existingResets);\n            } catch (error) {\n                console.error(\"Error parsing reset history:\", error);\n                resets = [];\n            }\n        }\n        const resetRecord = {\n            blockId,\n            blockTitle: blockData.title,\n            resetAt: new Date().toISOString(),\n            operationsLost: status.length,\n            viewersLost: totalViewers\n        };\n        resets.push(resetRecord);\n        // Mantener solo los últimos 100 resets\n        if (resets.length > 100) {\n            resets = resets.slice(-100);\n        }\n        localStorage.setItem(resetHistoryKey, JSON.stringify(resets));\n    }, [\n        blockId,\n        blockData.title,\n        status.length,\n        totalViewers\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"block \".concat(theme),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                className: \"block-title\",\n                children: blockData.title\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                lineNumber: 610,\n                columnNumber: 7\n            }, undefined),\n            blockData.autoStart && blockData.startTime && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"auto-start-info\",\n                children: [\n                    \"⏰ Inicio autom\\xe1tico: \",\n                    blockData.startTime\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                lineNumber: 613,\n                columnNumber: 9\n            }, undefined),\n            (state === \"paused\" || state === \"completed\") && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: generateExcel,\n                className: \"download-icon\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"icon-download\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                    lineNumber: 620,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                lineNumber: 619,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"status\",\n                children: Array.from({\n                    length: blockData.totalOperations\n                }).map((_, statusIndex)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"status-item\",\n                        children: [\n                            \"Operaci\\xf3n \".concat(statusIndex + 1, \": \"),\n                            status[statusIndex] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    status[statusIndex].status === \"success\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"status-success\",\n                                        children: \"✅\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                        lineNumber: 631,\n                                        columnNumber: 19\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"status-error\",\n                                        children: \"❌\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                        lineNumber: 633,\n                                        columnNumber: 19\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"timestamp\",\n                                        children: status[statusIndex].timestamp\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                        lineNumber: 635,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    status[statusIndex].orderStatus && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"order-status\",\n                                        children: status[statusIndex].orderStatus\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                        lineNumber: 637,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"status-pending\",\n                                children: \"⏳\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                lineNumber: 641,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, statusIndex, true, {\n                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                        lineNumber: 626,\n                        columnNumber: 11\n                    }, undefined))\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                lineNumber: 624,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"block-controls\",\n                children: [\n                    state === \"idle\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: startBlock,\n                        className: \"start-button\",\n                        children: \"▶️ Iniciar\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                        lineNumber: 649,\n                        columnNumber: 11\n                    }, undefined),\n                    state === \"running\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: pauseBlock,\n                        className: \"pause-button\",\n                        children: \"⏸️ Pausar\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                        lineNumber: 655,\n                        columnNumber: 11\n                    }, undefined),\n                    state === \"paused\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: resumeBlock,\n                                className: \"resume-button\",\n                                children: \"▶️ Reanudar\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                lineNumber: 662,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>onShowWarning(blockId, \"finalizar\"),\n                                className: \"finalize-button\",\n                                children: \"\\uD83C\\uDFC1 Finalizar\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                lineNumber: 665,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>onShowWarning(blockId, \"reiniciar\"),\n                                className: \"reset-button\",\n                                children: \"\\uD83D\\uDD04 Reiniciar\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                lineNumber: 668,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true),\n                    state === \"completed\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"completed-message\",\n                                children: \"✅ Bloque finalizado\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                lineNumber: 676,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>onShowWarning(blockId, \"reiniciar\"),\n                                className: \"reset-button\",\n                                children: \"\\uD83D\\uDD04 Reiniciar\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                                lineNumber: 677,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleEditModal,\n                        className: \"edit-button\",\n                        children: \"✏️ Editar\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                        lineNumber: 684,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                lineNumber: 647,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"total-viewers\",\n                children: [\n                    \"\\uD83D\\uDC65 \",\n                    totalViewers\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n                lineNumber: 689,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\German\\\\Desktop\\\\Dashboard Viewers- LaCasa\\\\youtube-viewers-lacasa\\\\src\\\\app\\\\components\\\\Block.tsx\",\n        lineNumber: 609,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Block, \"OE1n+7uooZlO3T5mQRSdWK1bmfY=\", false, function() {\n    return [\n        _ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme\n    ];\n});\n_c = Block;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Block);\nvar _c;\n$RefreshReg$(_c, \"Block\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvY29tcG9uZW50cy9CbG9jay50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0U7QUFDN0I7QUFDZDtBQXNDN0IsTUFBTU8sUUFBOEI7UUFBQyxFQUFFQyxXQUFXLEVBQUVDLElBQUksRUFBRUMsb0JBQW9CLEVBQUVDLE9BQU8sRUFBRUMsYUFBYSxFQUFFQyxlQUFlLEVBQUU7O0lBQ3ZILE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUdULHVEQUFRQTtJQUUxQixnREFBZ0Q7SUFDaEQsTUFBTVUsaUJBQWlCWCxrREFBV0EsQ0FBQztRQUNqQyxNQUFNWSxhQUFhQyxhQUFhQyxPQUFPLENBQUMsY0FBc0IsT0FBUlA7UUFDdEQsSUFBSUssWUFBWTtZQUNkLElBQUk7Z0JBQ0YsTUFBTUcsU0FBU0MsS0FBS0MsS0FBSyxDQUFDTDtnQkFDMUIsNkNBQTZDO2dCQUM3QyxJQUFJRyxPQUFPRyxTQUFTLEVBQUU7b0JBQ3BCLE1BQU1DLGdCQUFnQixJQUFJQyxLQUFLTCxPQUFPRyxTQUFTO29CQUMvQyxNQUFNRyxNQUFNLElBQUlEO29CQUNoQixNQUFNRSxXQUFXLENBQUNELElBQUlFLE9BQU8sS0FBS0osY0FBY0ksT0FBTyxFQUFDLElBQU0sUUFBTyxPQUFPLEVBQUM7b0JBQzdFLElBQUlELFdBQVcsR0FBRzt3QkFDaEJULGFBQWFXLFVBQVUsQ0FBQyxjQUFzQixPQUFSakI7d0JBQ3RDLE9BQU87b0JBQ1Q7Z0JBQ0Y7Z0JBQ0EsT0FBT1E7WUFDVCxFQUFFLE9BQU9VLE9BQU87Z0JBQ2RDLFFBQVFELEtBQUssQ0FBQyxvQ0FBb0NBO2dCQUNsRFosYUFBYVcsVUFBVSxDQUFDLGNBQXNCLE9BQVJqQjtnQkFDdEMsT0FBTztZQUNUO1FBQ0Y7UUFDQSxPQUFPO0lBQ1QsR0FBRztRQUFDQTtLQUFRO0lBRVosdURBQXVEO0lBQ3ZELE1BQU0sQ0FBQ29CLFFBQVFDLFVBQVUsR0FBRy9CLCtDQUFRQSxDQUFnQjtRQUNsRCxNQUFNZSxh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Riw4REFBQ0U7Z0NBQU9DLFNBQVMsSUFBTXZLLGNBQWNELFNBQVM7Z0NBQWNxSyxXQUFVOzBDQUFlOzs7Ozs7OztvQkFNeEZ6SSxVQUFVLDZCQUNUOzswQ0FDRSw4REFBQ3dJO2dDQUFJQyxXQUFVOzBDQUFvQjs7Ozs7OzBDQUNuQyw4REFBQ0U7Z0NBQU9DLFNBQVMsSUFBTXZLLGNBQWNELFNBQVM7Z0NBQWNxSyxXQUFVOzBDQUFlOzs7Ozs7OztrQ0FPekYsOERBQUNFO3dCQUFPQyxTQUFTdEI7d0JBQWlCbUIsV0FBVTtrQ0FBYzs7Ozs7Ozs7Ozs7OzBCQUs1RCw4REFBQ0Q7Z0JBQUlDLFdBQVU7O29CQUFnQjtvQkFBSXRJOzs7Ozs7Ozs7Ozs7O0FBR3pDO0dBM29CTW5DOztRQUNjRixtREFBUUE7OztLQUR0QkU7QUE2b0JOLCtEQUFlQSxLQUFLQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvY29tcG9uZW50cy9CbG9jay50c3g/Mzc5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tICcuLi9UaGVtZUNvbnRleHQnO1xyXG5pbXBvcnQgKiBhcyBYTFNYIGZyb20gJ3hsc3gnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCbG9ja1N0YXR1cyB7XHJcbiAgc3RhdHVzOiAnc3VjY2VzcycgfCAnZXJyb3InO1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICBkZXRhaWxzOiBhbnk7XHJcbiAgdGltZXN0YW1wOiBzdHJpbmc7XHJcbiAgb3JkZXJJZD86IG51bWJlcjtcclxuICBvcmRlclN0YXR1cz86IHN0cmluZztcclxuICBkdXJhdGlvbj86IG51bWJlcjtcclxuICBjb3VudD86IG51bWJlcjtcclxuICBzZXJ2aWNlSWQ/OiBudW1iZXI7XHJcbiAgY29zdD86IG51bWJlcjtcclxuICBzdGFydFRpbWU/OiBzdHJpbmc7XHJcbiAgZXN0aW1hdGVkRW5kVGltZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCbG9ja0RhdGEge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgdG90YWxPcGVyYXRpb25zOiBudW1iZXI7XHJcbiAgc2VydmljZUlkOiBudW1iZXI7XHJcbiAgY291bnQ6IG51bWJlcjtcclxuICBkZWNyZW1lbnQ6IG51bWJlcjtcclxuICBvcGVyYXRpb25UeXBlOiAnYWRkJyB8ICdzdWJ0cmFjdCc7XHJcbiAgYXV0b1N0YXJ0OiBib29sZWFuO1xyXG4gIHN0YXJ0VGltZTogc3RyaW5nO1xyXG4gIGludGVydmFsTWludXRlczogbnVtYmVyOyAvLyBJbnRlcnZhbG8gcGVyc29uYWxpemFibGUgZW4gbWludXRvcyAoMS01KVxyXG59XHJcblxyXG5pbnRlcmZhY2UgQmxvY2tQcm9wcyB7XHJcbiAgaW5pdGlhbERhdGE6IEJsb2NrRGF0YTtcclxuICBsaW5rOiBzdHJpbmc7XHJcbiAgb25Ub3RhbFZpZXdlcnNDaGFuZ2U6IChibG9ja0lkOiBzdHJpbmcsIHRvdGFsVmlld2VyczogbnVtYmVyKSA9PiB2b2lkO1xyXG4gIGJsb2NrSWQ6IHN0cmluZztcclxuICBvblNob3dXYXJuaW5nOiAoYmxvY2tJZDogc3RyaW5nLCB3YXJuaW5nVHlwZTogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIG9uU2hvd0VkaXRNb2RhbDogKGJsb2NrSWQ6IHN0cmluZywgYmxvY2tEYXRhOiBCbG9ja0RhdGEpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNvbnN0IEJsb2NrOiBSZWFjdC5GQzxCbG9ja1Byb3BzPiA9ICh7IGluaXRpYWxEYXRhLCBsaW5rLCBvblRvdGFsVmlld2Vyc0NoYW5nZSwgYmxvY2tJZCwgb25TaG93V2FybmluZywgb25TaG93RWRpdE1vZGFsIH0pID0+IHtcclxuICBjb25zdCB7IHRoZW1lIH0gPSB1c2VUaGVtZSgpO1xyXG4gIFxyXG4gIC8vIEZ1bmNpw7NuIHBhcmEgY2FyZ2FyIGVzdGFkbyBkZXNkZSBsb2NhbFN0b3JhZ2VcclxuICBjb25zdCBsb2FkQmxvY2tTdGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgYmxvY2tTdGF0ZV8ke2Jsb2NrSWR9YCk7XHJcbiAgICBpZiAoc2F2ZWRTdGF0ZSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2F2ZWRTdGF0ZSk7XHJcbiAgICAgICAgLy8gTGltcGlhciBkYXRvcyBtdXkgYW50aWd1b3MgKG3DoXMgZGUgNyBkw61hcylcclxuICAgICAgICBpZiAocGFyc2VkLmxhc3RTYXZlZCkge1xyXG4gICAgICAgICAgY29uc3QgbGFzdFNhdmVkRGF0ZSA9IG5ldyBEYXRlKHBhcnNlZC5sYXN0U2F2ZWQpO1xyXG4gICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgIGNvbnN0IGRheXNEaWZmID0gKG5vdy5nZXRUaW1lKCkgLSBsYXN0U2F2ZWREYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XHJcbiAgICAgICAgICBpZiAoZGF5c0RpZmYgPiA3KSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGBibG9ja1N0YXRlXyR7YmxvY2tJZH1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBzYXZlZCBibG9jayBzdGF0ZTonLCBlcnJvcik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYGJsb2NrU3RhdGVfJHtibG9ja0lkfWApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9LCBbYmxvY2tJZF0pO1xyXG5cclxuICAvLyBFc3RhZG8gbG9jYWwgZGVsIGJsb3F1ZSBjb24gY2FyZ2EgZGVzZGUgbG9jYWxTdG9yYWdlXHJcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlPEJsb2NrU3RhdHVzW10+KCgpID0+IHtcclxuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2FkQmxvY2tTdGF0ZSgpO1xyXG4gICAgcmV0dXJuIHNhdmVkU3RhdGU/LnN0YXR1cyB8fCBbXTtcclxuICB9KTtcclxuICBcclxuICBjb25zdCBbaW50ZXJ2YWxJZCwgc2V0SW50ZXJ2YWxJZF0gPSB1c2VTdGF0ZTxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtpc1BhdXNlZCwgc2V0SXNQYXVzZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtjdXJyZW50T3BlcmF0aW9uLCBzZXRDdXJyZW50T3BlcmF0aW9uXSA9IHVzZVN0YXRlKCgpID0+IHtcclxuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2FkQmxvY2tTdGF0ZSgpO1xyXG4gICAgcmV0dXJuIHNhdmVkU3RhdGU/LmN1cnJlbnRPcGVyYXRpb24gfHwgMDtcclxuICB9KTtcclxuICBcclxuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPCdpZGxlJyB8ICdydW5uaW5nJyB8ICdwYXVzZWQnIHwgJ2NvbXBsZXRlZCc+KCgpID0+IHtcclxuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2FkQmxvY2tTdGF0ZSgpO1xyXG4gICAgY29uc3Qgc2F2ZWRTdGF0ZVZhbHVlID0gc2F2ZWRTdGF0ZT8uc3RhdGUgfHwgJ2lkbGUnO1xyXG4gICAgLy8gU2kgZXN0YWJhICdydW5uaW5nJyBhbnRlcyBkZSByZWNhcmdhciwgY2FtYmlhciBhICdwYXVzZWQnIHBhcmEgZXZpdGFyIHByb2JsZW1hc1xyXG4gICAgcmV0dXJuIHNhdmVkU3RhdGVWYWx1ZSA9PT0gJ3J1bm5pbmcnID8gJ3BhdXNlZCcgOiBzYXZlZFN0YXRlVmFsdWU7XHJcbiAgfSk7XHJcbiAgXHJcbiAgY29uc3QgW3RvdGFsVmlld2Vycywgc2V0VG90YWxWaWV3ZXJzXSA9IHVzZVN0YXRlKCgpID0+IHtcclxuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2FkQmxvY2tTdGF0ZSgpO1xyXG4gICAgcmV0dXJuIHNhdmVkU3RhdGU/LnRvdGFsVmlld2VycyB8fCAwO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IFtibG9ja0RhdGEsIHNldEJsb2NrRGF0YV0gPSB1c2VTdGF0ZTxCbG9ja0RhdGE+KCgpID0+IHtcclxuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2FkQmxvY2tTdGF0ZSgpO1xyXG4gICAgcmV0dXJuIHNhdmVkU3RhdGU/LmJsb2NrRGF0YSB8fCBpbml0aWFsRGF0YTtcclxuICB9KTtcclxuICBcclxuICAvLyBGdW5jacOzbiBwYXJhIGd1YXJkYXIgZXN0YWRvIGVuIGxvY2FsU3RvcmFnZVxyXG4gIGNvbnN0IHNhdmVCbG9ja1N0YXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhdGVUb1NhdmUgPSB7XHJcbiAgICAgIHN0YXR1cyxcclxuICAgICAgY3VycmVudE9wZXJhdGlvbixcclxuICAgICAgc3RhdGUsXHJcbiAgICAgIHRvdGFsVmlld2VycyxcclxuICAgICAgYmxvY2tEYXRhLFxyXG4gICAgICBsYXN0U2F2ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBibG9ja1N0YXRlXyR7YmxvY2tJZH1gLCBKU09OLnN0cmluZ2lmeShzdGF0ZVRvU2F2ZSkpO1xyXG4gIH0sIFtibG9ja0lkLCBzdGF0dXMsIGN1cnJlbnRPcGVyYXRpb24sIHN0YXRlLCB0b3RhbFZpZXdlcnMsIGJsb2NrRGF0YV0pO1xyXG5cclxuICAvLyBHdWFyZGFyIGVzdGFkbyBjYWRhIHZleiBxdWUgY2FtYmllIGFsZ8O6biB2YWxvciBpbXBvcnRhbnRlXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNhdmVCbG9ja1N0YXRlKCk7XHJcbiAgfSwgW3N0YXR1cywgY3VycmVudE9wZXJhdGlvbiwgc3RhdGUsIHRvdGFsVmlld2VycywgYmxvY2tEYXRhLCBzYXZlQmxvY2tTdGF0ZV0pO1xyXG4gIFxyXG4gIC8vIFJlZnMgcGFyYSBtYW50ZW5lciB2YWxvcmVzIGFjdHVhbGl6YWRvcyBlbiBlbCBpbnRlcnZhbG9cclxuICBjb25zdCBpbnRlcnZhbFJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IGxhc3RSZXBvcnRlZFZpZXdlcnMgPSB1c2VSZWY8bnVtYmVyPigwKTtcclxuICBjb25zdCBzdGF0ZVJlZiA9IHVzZVJlZihzdGF0ZSk7XHJcbiAgY29uc3QgY3VycmVudE9wZXJhdGlvblJlZiA9IHVzZVJlZihjdXJyZW50T3BlcmF0aW9uKTtcclxuICBjb25zdCBibG9ja0RhdGFSZWYgPSB1c2VSZWYoYmxvY2tEYXRhKTtcclxuICBjb25zdCBzdGF0dXNSZWYgPSB1c2VSZWYoc3RhdHVzKTtcclxuICBjb25zdCB0b3RhbFZpZXdlcnNSZWYgPSB1c2VSZWYodG90YWxWaWV3ZXJzKTtcclxuXHJcbiAgLy8gQWN0dWFsaXphciByZWZzIGN1YW5kbyBjYW1iaWFuIGxvcyBlc3RhZG9zXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHN0YXRlUmVmLmN1cnJlbnQgPSBzdGF0ZTtcclxuICB9LCBbc3RhdGVdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGN1cnJlbnRPcGVyYXRpb25SZWYuY3VycmVudCA9IGN1cnJlbnRPcGVyYXRpb247XHJcbiAgfSwgW2N1cnJlbnRPcGVyYXRpb25dKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGJsb2NrRGF0YVJlZi5jdXJyZW50ID0gYmxvY2tEYXRhO1xyXG4gIH0sIFtibG9ja0RhdGFdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHN0YXR1c1JlZi5jdXJyZW50ID0gc3RhdHVzO1xyXG4gIH0sIFtzdGF0dXNdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHRvdGFsVmlld2Vyc1JlZi5jdXJyZW50ID0gdG90YWxWaWV3ZXJzO1xyXG4gIH0sIFt0b3RhbFZpZXdlcnNdKTtcclxuXHJcbiAgLy8gRWZlY3RvIHBhcmEgYXV0by1zdGFydFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoYmxvY2tEYXRhLmF1dG9TdGFydCAmJiBibG9ja0RhdGEuc3RhcnRUaW1lICYmIHN0YXRlID09PSAnaWRsZScpIHtcclxuICAgICAgY29uc3QgW2hvdXJzLCBtaW51dGVzXSA9IGJsb2NrRGF0YS5zdGFydFRpbWUuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcclxuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCksIGhvdXJzLCBtaW51dGVzLCAwLCAwKTtcclxuICAgICAgY29uc3QgZGVsYXkgPSBzdGFydC5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgaWYgKGRlbGF5ID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gc3RhcnRCbG9jaygpLCBkZWxheSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2Jsb2NrRGF0YS5hdXRvU3RhcnQsIGJsb2NrRGF0YS5zdGFydFRpbWUsIHN0YXRlXSk7XHJcblxyXG4gIC8vIEVmZWN0byBwYXJhIG5vdGlmaWNhciBjYW1iaW9zIGVuIHRvdGFsVmlld2VycyAob3B0aW1pemFkbylcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGxhc3RSZXBvcnRlZFZpZXdlcnMuY3VycmVudCAhPT0gdG90YWxWaWV3ZXJzKSB7XHJcbiAgICAgIG9uVG90YWxWaWV3ZXJzQ2hhbmdlKGJsb2NrSWQsIHRvdGFsVmlld2Vycyk7XHJcbiAgICAgIGxhc3RSZXBvcnRlZFZpZXdlcnMuY3VycmVudCA9IHRvdGFsVmlld2VycztcclxuICAgIH1cclxuICB9LCBbdG90YWxWaWV3ZXJzLCBibG9ja0lkLCBvblRvdGFsVmlld2Vyc0NoYW5nZV0pO1xyXG5cclxuICAvLyBDbGVhbnVwIGFsIGRlc21vbnRhciB5IGFudGVzIGRlIGNlcnJhciBsYSB2ZW50YW5hXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9ICgpID0+IHtcclxuICAgICAgaWYgKGludGVydmFsUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsUmVmLmN1cnJlbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEd1YXJkYXIgZXN0YWRvIGZpbmFsIGFudGVzIGRlIGNlcnJhclxyXG4gICAgICBjb25zdCBmaW5hbFN0YXRlID0ge1xyXG4gICAgICAgIHN0YXR1czogc3RhdHVzUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgY3VycmVudE9wZXJhdGlvbjogY3VycmVudE9wZXJhdGlvblJlZi5jdXJyZW50LFxyXG4gICAgICAgIHN0YXRlOiBzdGF0ZVJlZi5jdXJyZW50ID09PSAncnVubmluZycgPyAncGF1c2VkJyA6IHN0YXRlUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgdG90YWxWaWV3ZXJzOiB0b3RhbFZpZXdlcnNSZWYuY3VycmVudCxcclxuICAgICAgICBibG9ja0RhdGE6IGJsb2NrRGF0YVJlZi5jdXJyZW50LFxyXG4gICAgICAgIGxhc3RTYXZlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH07XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBibG9ja1N0YXRlXyR7YmxvY2tJZH1gLCBKU09OLnN0cmluZ2lmeShmaW5hbFN0YXRlKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBoYW5kbGVCZWZvcmVVbmxvYWQpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAoaW50ZXJ2YWxSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxSZWYuY3VycmVudCk7XHJcbiAgICAgIH1cclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGhhbmRsZUJlZm9yZVVubG9hZCk7XHJcbiAgICB9O1xyXG4gIH0sIFtibG9ja0lkXSk7XHJcblxyXG4gIGNvbnN0IGdldFNlcnZpY2VEdXJhdGlvbiA9IChzZXJ2aWNlSWQ6IG51bWJlcikgPT4ge1xyXG4gICAgc3dpdGNoIChzZXJ2aWNlSWQpIHtcclxuICAgICAgY2FzZSAzMzY6IHJldHVybiAxMjA7XHJcbiAgICAgIGNhc2UgMzM3OiByZXR1cm4gMTUwO1xyXG4gICAgICBjYXNlIDMzNDogcmV0dXJuIDYwO1xyXG4gICAgICBjYXNlIDMzNTogcmV0dXJuIDkwO1xyXG4gICAgICBjYXNlIDMzODogcmV0dXJuIDE4MDtcclxuICAgICAgY2FzZSA0NTk6IHJldHVybiAyNDA7XHJcbiAgICAgIGNhc2UgNDYwOiByZXR1cm4gMzYwO1xyXG4gICAgICBjYXNlIDY1NzogcmV0dXJuIDQ4MDtcclxuICAgICAgZGVmYXVsdDogcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2VuZXJhdGVFeGNlbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIC8vIENyZWFyIGVsIHJlc3VtZW4gcGFyYSBlbCBFeGNlbFxyXG4gICAgY29uc3QgY3VycmVudFN0YXR1cyA9IHN0YXR1c1JlZi5jdXJyZW50O1xyXG4gICAgY29uc3QgY3VycmVudEJsb2NrRGF0YSA9IGJsb2NrRGF0YVJlZi5jdXJyZW50O1xyXG4gICAgXHJcbiAgICBjb25zdCBzdW1tYXJ5ID0gY3VycmVudFN0YXR1cy5tYXAoKHN0YXR1c0l0ZW0pID0+ICh7XHJcbiAgICAgICdFc3RhZG8nOiBzdGF0dXNJdGVtLnN0YXR1cyxcclxuICAgICAgJ01lbnNhamUnOiBzdGF0dXNJdGVtLm1lc3NhZ2UsXHJcbiAgICAgICdUaW1lc3RhbXAnOiBzdGF0dXNJdGVtLnRpbWVzdGFtcCxcclxuICAgICAgJ09yZGVyIElEJzogc3RhdHVzSXRlbS5vcmRlcklkLFxyXG4gICAgICAnT3JkZXIgU3RhdHVzJzogc3RhdHVzSXRlbS5vcmRlclN0YXR1cyxcclxuICAgICAgJ0R1cmFjacOzbiAobWludXRvcyknOiBzdGF0dXNJdGVtLmR1cmF0aW9uLFxyXG4gICAgICAnQ2FudGlkYWQgZGUgVmlld2Vycyc6IHN0YXR1c0l0ZW0uY291bnQsXHJcbiAgICAgICdDb3N0byBkZSBsYSBPcGVyYWNpw7NuJzogc3RhdHVzSXRlbS5kZXRhaWxzPy5yZXM/LnN1bSB8fCAwLFxyXG4gICAgICAuLi5zdGF0dXNJdGVtLmRldGFpbHMsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgLy8gR2VuZXJhciBpbnRlcnZhbG9zIGRlIHRpZW1wbyBkZXNkZSBsYXMgMTA6MjUgQU0gaGFzdGEgbGFzIDIzOjAwIFBNXHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShcIjE5NzAtMDEtMDFUMTA6MjU6MDBaXCIpO1xyXG4gICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKFwiMTk3MC0wMS0wMVQyMzowMDowMFpcIik7XHJcbiAgICBjb25zdCB0aW1lSW50ZXJ2YWxzOiB7IEhvcmE6IHN0cmluZzsgW2tleTogc3RyaW5nXTogbnVtYmVyIHwgc3RyaW5nIH1bXSA9IFtdO1xyXG5cclxuICAgIGxldCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKHN0YXJ0VGltZSk7XHJcblxyXG4gICAgd2hpbGUgKGN1cnJlbnRUaW1lIDw9IGVuZFRpbWUpIHtcclxuICAgICAgdGltZUludGVydmFscy5wdXNoKHsgSG9yYTogY3VycmVudFRpbWUudG9JU09TdHJpbmcoKS5zdWJzdHIoMTEsIDUpIH0pO1xyXG4gICAgICBjdXJyZW50VGltZSA9IG5ldyBEYXRlKGN1cnJlbnRUaW1lLmdldFRpbWUoKSArIDYwMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb3N0Um93OiB7IEhvcmE6IHN0cmluZzsgW2tleTogc3RyaW5nXTogbnVtYmVyIHwgc3RyaW5nIH0gPSB7IEhvcmE6ICdDb3N0bycgfTtcclxuXHJcbiAgICBjdXJyZW50U3RhdHVzLmZvckVhY2goKHN0YXR1c0l0ZW0pID0+IHtcclxuICAgICAgaWYgKHN0YXR1c0l0ZW0uc3RhdHVzID09PSAnc3VjY2VzcycgJiYgc3RhdHVzSXRlbS5jb3VudCAmJiBzdGF0dXNJdGVtLnRpbWVzdGFtcCkge1xyXG4gICAgICAgIC8vIEludGVudGFyIHBhcnNlYXIgZWwgdGltZXN0YW1wIGRlIG1hbmVyYSBtw6FzIHJvYnVzdGFcclxuICAgICAgICBsZXQgc3RhcnRUaW1lU3RyaW5nOiBzdHJpbmc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIFNpIGVsIHRpbWVzdGFtcCBlc3TDoSBlbiBmb3JtYXRvIEhIOk1NOlNTLCBleHRyYWVyIHNvbG8gSEg6TU1cclxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHN0YXR1c0l0ZW0udGltZXN0YW1wLm1hdGNoKC8oXFxkezEsMn0pOihcXGR7Mn0pOihcXGR7Mn0pLyk7XHJcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gdGltZU1hdGNoWzFdLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSB0aW1lTWF0Y2hbMl07XHJcbiAgICAgICAgICAgIHN0YXJ0VGltZVN0cmluZyA9IGAke2hvdXJzfToke21pbnV0ZXN9YDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNpIG5vIHNlIHB1ZWRlIHBhcnNlYXIsIHVzYXIgdW4gdmFsb3IgcG9yIGRlZmVjdG9cclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdObyBzZSBwdWRvIHBhcnNlYXIgZWwgdGltZXN0YW1wOicsIHN0YXR1c0l0ZW0udGltZXN0YW1wKTtcclxuICAgICAgICAgICAgc3RhcnRUaW1lU3RyaW5nID0gJzEwOjI1JzsgLy8gVmFsb3IgcG9yIGRlZmVjdG9cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2VhbmRvIHRpbWVzdGFtcDonLCBzdGF0dXNJdGVtLnRpbWVzdGFtcCwgZXJyb3IpO1xyXG4gICAgICAgICAgc3RhcnRUaW1lU3RyaW5nID0gJzEwOjI1JzsgLy8gVmFsb3IgcG9yIGRlZmVjdG9cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBzdGF0dXNJdGVtLmR1cmF0aW9uIHx8IDA7XHJcbiAgICAgICAgY29uc3Qgb3JkZXJJZENvbHVtbiA9IGBPcGVyYWNpw7NuICR7c3RhdHVzSXRlbS5vcmRlcklkfWA7XHJcblxyXG4gICAgICAgIGlmICghKG9yZGVySWRDb2x1bW4gaW4gY29zdFJvdykpIHtcclxuICAgICAgICAgIGNvc3RSb3dbb3JkZXJJZENvbHVtbl0gPSBzdGF0dXNJdGVtLmRldGFpbHM/LnJlcz8uc3VtIHx8IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aW1lSW50ZXJ2YWxzLmZvckVhY2goKGludGVydmFsKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIShvcmRlcklkQ29sdW1uIGluIGludGVydmFsKSkge1xyXG4gICAgICAgICAgICBpbnRlcnZhbFtvcmRlcklkQ29sdW1uXSA9ICcnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gdGltZUludGVydmFscy5maW5kSW5kZXgoKGVudHJ5KSA9PiBlbnRyeS5Ib3JhID09PSBzdGFydFRpbWVTdHJpbmcpO1xyXG5cclxuICAgICAgICBpZiAoc3RhcnRJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHVyYXRpb24gJiYgc3RhcnRJbmRleCArIGkgPCB0aW1lSW50ZXJ2YWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRpbWVJbnRlcnZhbHNbc3RhcnRJbmRleCArIGldW29yZGVySWRDb2x1bW5dID0gc3RhdHVzSXRlbS5jb3VudDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGFsbFJvd3MgPSBbY29zdFJvdywgLi4udGltZUludGVydmFsc107XHJcblxyXG4gICAgY29uc3Qgd3NTdW1tYXJ5ID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KHN1bW1hcnkpO1xyXG4gICAgY29uc3Qgd3NWaWV3ZXJzID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KGFsbFJvd3MpO1xyXG5cclxuICAgIGNvbnN0IHdiID0gWExTWC51dGlscy5ib29rX25ldygpO1xyXG4gICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3NTdW1tYXJ5LCAnUmVzdW1lbiBkZSBPcGVyYWNpb25lcycpO1xyXG4gICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3NWaWV3ZXJzLCAnVmlld2VycyBwb3IgTWludXRvJyk7XHJcblxyXG4gICAgWExTWC53cml0ZUZpbGUod2IsIGAke2N1cnJlbnRCbG9ja0RhdGEudGl0bGV9Lnhsc3hgKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUFwaUNhbGwgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBWZXJpZmljYXIgY29uZGljaW9uZXMgdXNhbmRvIHJlZnMgcGFyYSB2YWxvcmVzIGFjdHVhbGVzXHJcbiAgICBpZiAoIWxpbmsgfHwgc3RhdGVSZWYuY3VycmVudCAhPT0gJ3J1bm5pbmcnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGAke2Jsb2NrRGF0YVJlZi5jdXJyZW50LnRpdGxlfTogTm8gZWplY3V0YW5kbyBBUEkgY2FsbC4gTGluazogJHtsaW5rfSwgU3RhdGU6ICR7c3RhdGVSZWYuY3VycmVudH1gKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRCbG9ja0RhdGEgPSBibG9ja0RhdGFSZWYuY3VycmVudDtcclxuICAgICAgY29uc3QgY3VycmVudE9wTnVtID0gY3VycmVudE9wZXJhdGlvblJlZi5jdXJyZW50O1xyXG4gICAgICBjb25zdCB7IGNvdW50LCBkZWNyZW1lbnQsIHNlcnZpY2VJZCwgb3BlcmF0aW9uVHlwZSB9ID0gY3VycmVudEJsb2NrRGF0YTtcclxuICAgICAgXHJcbiAgICAgIC8vIENhbGN1bGEgbGEgY2FudGlkYWQgcGFyYSBsYSBvcGVyYWNpw7NuIGFjdHVhbFxyXG4gICAgICBjb25zdCBvcGVyYXRpb25Db3VudCA9XHJcbiAgICAgICAgb3BlcmF0aW9uVHlwZSA9PT0gJ2FkZCdcclxuICAgICAgICAgID8gY291bnQgKyAoZGVjcmVtZW50IHx8IDApICogY3VycmVudE9wTnVtXHJcbiAgICAgICAgICA6IGNvdW50IC0gKGRlY3JlbWVudCB8fCAwKSAqIGN1cnJlbnRPcE51bTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGAke2N1cnJlbnRCbG9ja0RhdGEudGl0bGV9OiBJbmljaWFuZG8gb3BlcmFjacOzbiAke2N1cnJlbnRPcE51bSArIDF9IGNvbiAke29wZXJhdGlvbkNvdW50fSB2aWV3ZXJzYCk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL3Byb3h5P3NlcnZpY2VfaWQ9JHtzZXJ2aWNlSWR9JmNvdW50PSR7b3BlcmF0aW9uQ291bnR9Jmxpbms9JHtsaW5rfWApO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICBcclxuICAgICAgLy8gR2VuZXJhciB0aW1lc3RhbXAgZW4gZm9ybWF0byBjb25zaXN0ZW50ZSBISDpNTTpTU1xyXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBub3cudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXTsgLy8gRm9ybWF0byBISDpNTTpTU1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZHVyYXRpb24gPSBnZXRTZXJ2aWNlRHVyYXRpb24oc2VydmljZUlkKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENhbGN1bGFyIGhvcmEgZGUgZmluYWxpemFjacOzbiBlc3RpbWFkYVxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBub3cudG9JU09TdHJpbmcoKTtcclxuICAgICAgY29uc3QgZXN0aW1hdGVkRW5kVGltZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyAoZHVyYXRpb24gKiA2MCAqIDEwMDApKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYCR7Y3VycmVudEJsb2NrRGF0YS50aXRsZX0sIE9wZXJhdGlvbiAke2N1cnJlbnRPcE51bSArIDF9OmAsIGRhdGEpO1xyXG5cclxuICAgICAgY29uc3QgbmV3U3RhdHVzOiBCbG9ja1N0YXR1cyA9IHtcclxuICAgICAgICBzdGF0dXM6IGRhdGEuZXJyb3IgPyAnZXJyb3InIDogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIG1lc3NhZ2U6IGRhdGEuZXJyb3IgPyAnRXJyb3IgZW4gbGEgb3BlcmFjacOzbicgOiAnT3BlcmFjacOzbiBleGl0b3NhJyxcclxuICAgICAgICBkZXRhaWxzOiBkYXRhLFxyXG4gICAgICAgIHRpbWVzdGFtcCxcclxuICAgICAgICBvcmRlcklkOiBkYXRhLnJlcz8ub3JkZXJfaWQsXHJcbiAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgY291bnQ6IG9wZXJhdGlvbkNvdW50LFxyXG4gICAgICAgIHNlcnZpY2VJZCxcclxuICAgICAgICBjb3N0OiBkYXRhLnJlcz8uc3VtIHx8IDAsXHJcbiAgICAgICAgc3RhcnRUaW1lLFxyXG4gICAgICAgIGVzdGltYXRlZEVuZFRpbWUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzZXRTdGF0dXMocHJldiA9PiBbLi4ucHJldiwgbmV3U3RhdHVzXSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHdWFyZGFyIGVuIGhpc3RvcmlhbCBnbG9iYWwgaW5tZWRpYXRhbWVudGVcclxuICAgICAgc2F2ZVRvR2xvYmFsSGlzdG9yeShuZXdTdGF0dXMpO1xyXG5cclxuICAgICAgLy8gQWN0dWFsaXphciBlbCB0b3RhbCBkZSBlc3BlY3RhZG9yZXNcclxuICAgICAgaWYgKG5ld1N0YXR1cy5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgIHNldFRvdGFsVmlld2VycygocHJldjogbnVtYmVyKSA9PiBwcmV2ICsgb3BlcmF0aW9uQ291bnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBuZXh0T3BlcmF0aW9uID0gY3VycmVudE9wTnVtICsgMTtcclxuICAgICAgc2V0Q3VycmVudE9wZXJhdGlvbihuZXh0T3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGlmIChuZXh0T3BlcmF0aW9uID49IGN1cnJlbnRCbG9ja0RhdGEudG90YWxPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgaWYgKGludGVydmFsUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxSZWYuY3VycmVudCk7XHJcbiAgICAgICAgICBpbnRlcnZhbFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgIHNldEludGVydmFsSWQobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFN0YXRlKCdjb21wbGV0ZWQnKTtcclxuICAgICAgICBzdGF0ZVJlZi5jdXJyZW50ID0gJ2NvbXBsZXRlZCc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTm90aWZpY2FjacOzbiBkZSBibG9xdWUgY29tcGxldGFkb1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cgJiYgTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgbmV3IE5vdGlmaWNhdGlvbihg8J+OiSAke2N1cnJlbnRCbG9ja0RhdGEudGl0bGV9IENvbXBsZXRhZG9gLCB7XHJcbiAgICAgICAgICAgIGJvZHk6IGBFbCBibG9xdWUgc2UgaGEgY29tcGxldGFkbyBleGl0b3NhbWVudGUgY29uICR7dG90YWxWaWV3ZXJzUmVmLmN1cnJlbnR9IHZpZXdlcnMgdG90YWxlc2AsXHJcbiAgICAgICAgICAgIGljb246ICcvZmF2aWNvbi5pY28nXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQXV0by1nZW5lcmFyIEV4Y2VsIGFsIGNvbXBsZXRhclxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2VuZXJhdGVFeGNlbCgpLCAxMDAwKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7YmxvY2tEYXRhUmVmLmN1cnJlbnQudGl0bGV9LCBPcGVyYXRpb24gJHtjdXJyZW50T3BlcmF0aW9uUmVmLmN1cnJlbnQgKyAxfTpgLCBlcnJvcik7XHJcblxyXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBjb25zdCBuZXdTdGF0dXM6IEJsb2NrU3RhdHVzID0ge1xyXG4gICAgICAgIHN0YXR1czogJ2Vycm9yJyxcclxuICAgICAgICBtZXNzYWdlOiAnRXJyb3IgZW4gbGEgb3BlcmFjacOzbicsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBub3cudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXSwgLy8gRm9ybWF0byBjb25zaXN0ZW50ZSBISDpNTTpTU1xyXG4gICAgICAgIGR1cmF0aW9uOiAwLFxyXG4gICAgICAgIGNvc3Q6IDAsXHJcbiAgICAgICAgc3RhcnRUaW1lOiBub3cudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBlc3RpbWF0ZWRFbmRUaW1lOiBub3cudG9JU09TdHJpbmcoKSwgLy8gU2luIGR1cmFjacOzbiBwYXJhIGVycm9yZXNcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNldFN0YXR1cyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdTdGF0dXNdKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEd1YXJkYXIgZW4gaGlzdG9yaWFsIGdsb2JhbCBpbm1lZGlhdGFtZW50ZVxyXG4gICAgICBzYXZlVG9HbG9iYWxIaXN0b3J5KG5ld1N0YXR1cyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBuZXh0T3BlcmF0aW9uID0gY3VycmVudE9wZXJhdGlvblJlZi5jdXJyZW50ICsgMTtcclxuICAgICAgc2V0Q3VycmVudE9wZXJhdGlvbihuZXh0T3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGlmIChuZXh0T3BlcmF0aW9uID49IGJsb2NrRGF0YVJlZi5jdXJyZW50LnRvdGFsT3BlcmF0aW9ucykge1xyXG4gICAgICAgIGlmIChpbnRlcnZhbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgICAgaW50ZXJ2YWxSZWYuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICBzZXRJbnRlcnZhbElkKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRTdGF0ZSgnY29tcGxldGVkJyk7XHJcbiAgICAgICAgc3RhdGVSZWYuY3VycmVudCA9ICdjb21wbGV0ZWQnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE5vdGlmaWNhY2nDs24gZGUgYmxvcXVlIGNvbXBsZXRhZG8gKHBhcmEgY2Fzb3MgZGUgZXJyb3IgdGFtYmnDqW4pXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICdOb3RpZmljYXRpb24nIGluIHdpbmRvdyAmJiBOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2dyYW50ZWQnKSB7XHJcbiAgICAgICAgICBuZXcgTm90aWZpY2F0aW9uKGDwn4+BICR7YmxvY2tEYXRhUmVmLmN1cnJlbnQudGl0bGV9IEZpbmFsaXphZG9gLCB7XHJcbiAgICAgICAgICAgIGJvZHk6IGBFbCBibG9xdWUgaGEgZmluYWxpemFkbyAoY29uIGVycm9yZXMpIC0gVG90YWwgdmlld2VyczogJHt0b3RhbFZpZXdlcnNSZWYuY3VycmVudH1gLFxyXG4gICAgICAgICAgICBpY29uOiAnL2Zhdmljb24uaWNvJ1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2VuZXJhdGVFeGNlbCgpLCAxMDAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtsaW5rLCBnZW5lcmF0ZUV4Y2VsXSk7XHJcblxyXG4gIGNvbnN0IHN0YXJ0QmxvY2sgPSAoKSA9PiB7XHJcbiAgICBpZiAoc3RhdGUgPT09ICdydW5uaW5nJykgcmV0dXJuO1xyXG5cclxuICAgIHNldElzUGF1c2VkKGZhbHNlKTtcclxuICAgIHNldFN0YXRlKCdydW5uaW5nJyk7XHJcbiAgICBcclxuICAgIC8vIEFjdHVhbGl6YXIgZWwgcmVmIGlubWVkaWF0YW1lbnRlIHBhcmEgcXVlIGhhbmRsZUFwaUNhbGwgbG8gZGV0ZWN0ZVxyXG4gICAgc3RhdGVSZWYuY3VycmVudCA9ICdydW5uaW5nJztcclxuXHJcbiAgICAvLyBFbnZpYXIgbGEgcHJpbWVyYSBvcGVyYWNpw7NuIGlubWVkaWF0YW1lbnRlXHJcbiAgICBoYW5kbGVBcGlDYWxsKCk7XHJcblxyXG4gICAgLy8gQ29uZmlndXJhciBlbCBpbnRlcnZhbG8gcGFyYSBsYXMgc2lndWllbnRlcyBvcGVyYWNpb25lc1xyXG4gICAgY29uc3QgbmV3SW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IGhhbmRsZUFwaUNhbGwoKSwgMTIwMDAwKTsgLy8gMiBtaW51dG9zXHJcbiAgICBpbnRlcnZhbFJlZi5jdXJyZW50ID0gbmV3SW50ZXJ2YWxJZDtcclxuICAgIHNldEludGVydmFsSWQobmV3SW50ZXJ2YWxJZCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcGF1c2VCbG9jayA9ICgpID0+IHtcclxuICAgIGlmIChpbnRlcnZhbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxSZWYuY3VycmVudCk7XHJcbiAgICAgIGludGVydmFsUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICBzZXRJbnRlcnZhbElkKG51bGwpO1xyXG4gICAgICBzZXRJc1BhdXNlZCh0cnVlKTtcclxuICAgICAgc2V0U3RhdGUoJ3BhdXNlZCcpO1xyXG4gICAgICBcclxuICAgICAgLy8gQWN0dWFsaXphciBlbCByZWYgaW5tZWRpYXRhbWVudGVcclxuICAgICAgc3RhdGVSZWYuY3VycmVudCA9ICdwYXVzZWQnO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlc3VtZUJsb2NrID0gKCkgPT4ge1xyXG4gICAgc2V0SXNQYXVzZWQoZmFsc2UpO1xyXG4gICAgc2V0U3RhdGUoJ3J1bm5pbmcnKTtcclxuICAgIFxyXG4gICAgLy8gQWN0dWFsaXphciBlbCByZWYgaW5tZWRpYXRhbWVudGVcclxuICAgIHN0YXRlUmVmLmN1cnJlbnQgPSAncnVubmluZyc7XHJcblxyXG4gICAgLy8gTGxhbWFyIGEgbGEgQVBJIGlubWVkaWF0YW1lbnRlIGRlc3B1w6lzIGRlIHJlYW51ZGFyXHJcbiAgICBoYW5kbGVBcGlDYWxsKCk7XHJcblxyXG4gICAgLy8gUmVpbmljaWFyIGVsIGludGVydmFsb1xyXG4gICAgY29uc3QgbmV3SW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGhhbmRsZUFwaUNhbGwsIDEyMDAwMCk7XHJcbiAgICBpbnRlcnZhbFJlZi5jdXJyZW50ID0gbmV3SW50ZXJ2YWxJZDtcclxuICAgIHNldEludGVydmFsSWQobmV3SW50ZXJ2YWxJZCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZmluYWxpemVCbG9jayA9ICgpID0+IHtcclxuICAgIGlmIChpbnRlcnZhbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxSZWYuY3VycmVudCk7XHJcbiAgICAgIGludGVydmFsUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICBzZXRJbnRlcnZhbElkKG51bGwpO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXRlICE9PSAnY29tcGxldGVkJykge1xyXG4gICAgICBzZXRTdGF0ZSgnY29tcGxldGVkJyk7XHJcbiAgICAgIHN0YXRlUmVmLmN1cnJlbnQgPSAnY29tcGxldGVkJztcclxuICAgICAgXHJcbiAgICAgIC8vIE5vdGlmaWNhY2nDs24gZGUgZmluYWxpemFjacOzbiBtYW51YWxcclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICdOb3RpZmljYXRpb24nIGluIHdpbmRvdyAmJiBOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2dyYW50ZWQnKSB7XHJcbiAgICAgICAgbmV3IE5vdGlmaWNhdGlvbihg8J+PgSAke2Jsb2NrRGF0YS50aXRsZX0gRmluYWxpemFkbyBNYW51YWxtZW50ZWAsIHtcclxuICAgICAgICAgIGJvZHk6IGBFbCBibG9xdWUgZnVlIGZpbmFsaXphZG8gbWFudWFsbWVudGUgY29uICR7dG90YWxWaWV3ZXJzfSB2aWV3ZXJzIHRvdGFsZXNgLFxyXG4gICAgICAgICAgaWNvbjogJy9mYXZpY29uLmljbydcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZ2VuZXJhdGVFeGNlbCgpO1xyXG4gICAgfVxyXG4gICAgc2V0QmxvY2tEYXRhKHByZXYgPT4gKHsgLi4ucHJldiwgYXV0b1N0YXJ0OiBmYWxzZSB9KSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzZXRCbG9jayA9ICgpID0+IHtcclxuICAgIC8vIENPUlJJR0lETzogTm8gZ3VhcmRhbW9zIGxhcyBvcGVyYWNpb25lcyBudWV2YW1lbnRlIHBvcnF1ZSB5YSBmdWVyb24gZ3VhcmRhZGFzXHJcbiAgICAvLyBjdWFuZG8gc2UgZWplY3V0YXJvbiBvcmlnaW5hbG1lbnRlIGVuIGhhbmRsZUFwaUNhbGwgKGzDrW5lYXMgMzQxIHkgMzc3KVxyXG4gICAgXHJcbiAgICAvLyBSZWdpc3RyYXIgZWwgcmVzZXQgZGVsIGJsb3F1ZSBjb24gbGFzIG9wZXJhY2lvbmVzIHF1ZSBzZSB2YW4gYSBwZXJkZXJcclxuICAgIHNhdmVCbG9ja1Jlc2V0KCk7XHJcbiAgICBcclxuICAgIGlmIChpbnRlcnZhbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxSZWYuY3VycmVudCk7XHJcbiAgICAgIGludGVydmFsUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICBzZXRJbnRlcnZhbElkKG51bGwpO1xyXG4gICAgfVxyXG4gICAgc2V0U3RhdHVzKFtdKTtcclxuICAgIHNldElzUGF1c2VkKGZhbHNlKTtcclxuICAgIHNldEN1cnJlbnRPcGVyYXRpb24oMCk7XHJcbiAgICBzZXRTdGF0ZSgnaWRsZScpO1xyXG4gICAgc3RhdGVSZWYuY3VycmVudCA9ICdpZGxlJztcclxuICAgIHNldFRvdGFsVmlld2VycygwKTtcclxuICAgIHNldEJsb2NrRGF0YShwcmV2ID0+ICh7IC4uLnByZXYsIGF1dG9TdGFydDogZmFsc2UsIHN0YXJ0VGltZTogJycgfSkpO1xyXG4gICAgXHJcbiAgICAvLyBMaW1waWFyIGVzdGFkbyBndWFyZGFkbyBkZWwgbG9jYWxTdG9yYWdlXHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgYmxvY2tTdGF0ZV8ke2Jsb2NrSWR9YCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRWRpdE1vZGFsID0gKCkgPT4ge1xyXG4gICAgb25TaG93RWRpdE1vZGFsKGJsb2NrSWQsIGJsb2NrRGF0YSk7XHJcbiAgfTtcclxuXHJcbiAgLy8gRnVuY2nDs24gcGFyYSBhY3R1YWxpemFyIGJsb2NrRGF0YSBkZXNkZSBlbCBjb21wb25lbnRlIHBhZHJlXHJcbiAgY29uc3QgdXBkYXRlQmxvY2tEYXRhID0gKG5ld0RhdGE6IEJsb2NrRGF0YSkgPT4ge1xyXG4gICAgc2V0QmxvY2tEYXRhKG5ld0RhdGEpO1xyXG4gIH07XHJcblxyXG4gIC8vIEV4cG9uZXIgZnVuY2lvbmVzIGFsIGNvbXBvbmVudGUgcGFkcmUgbWVkaWFudGUgZWZlY3Rvc1xyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAod2luZG93IGFzIGFueSlbYHVwZGF0ZUJsb2NrRGF0YV8ke2Jsb2NrSWR9YF0gPSB1cGRhdGVCbG9ja0RhdGE7XHJcbiAgICAod2luZG93IGFzIGFueSlbYGZpbmFsaXplQmxvY2tfJHtibG9ja0lkfWBdID0gZmluYWxpemVCbG9jaztcclxuICAgICh3aW5kb3cgYXMgYW55KVtgcmVzZXRCbG9ja18ke2Jsb2NrSWR9YF0gPSByZXNldEJsb2NrO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgZGVsZXRlICh3aW5kb3cgYXMgYW55KVtgdXBkYXRlQmxvY2tEYXRhXyR7YmxvY2tJZH1gXTtcclxuICAgICAgZGVsZXRlICh3aW5kb3cgYXMgYW55KVtgZmluYWxpemVCbG9ja18ke2Jsb2NrSWR9YF07XHJcbiAgICAgIGRlbGV0ZSAod2luZG93IGFzIGFueSlbYHJlc2V0QmxvY2tfJHtibG9ja0lkfWBdO1xyXG4gICAgfTtcclxuICB9LCBbYmxvY2tJZF0pO1xyXG5cclxuICAvLyBGdW5jacOzbiBwYXJhIGd1YXJkYXIgb3BlcmFjacOzbiBlbiBoaXN0b3JpYWwgcGVybWFuZW50ZVxyXG4gIGNvbnN0IHNhdmVUb0dsb2JhbEhpc3RvcnkgPSB1c2VDYWxsYmFjaygob3BlcmF0aW9uOiBCbG9ja1N0YXR1cykgPT4ge1xyXG4gICAgY29uc3QgZ2xvYmFsSGlzdG9yeUtleSA9ICdnbG9iYWxPcGVyYXRpb25zSGlzdG9yeSc7XHJcbiAgICBjb25zdCBleGlzdGluZ0hpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShnbG9iYWxIaXN0b3J5S2V5KTtcclxuICAgIGxldCBoaXN0b3J5ID0gW107XHJcbiAgICBcclxuICAgIGlmIChleGlzdGluZ0hpc3RvcnkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBoaXN0b3J5ID0gSlNPTi5wYXJzZShleGlzdGluZ0hpc3RvcnkpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgZ2xvYmFsIGhpc3Rvcnk6JywgZXJyb3IpO1xyXG4gICAgICAgIGhpc3RvcnkgPSBbXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBoaXN0b3JpY2FsT3BlcmF0aW9uID0ge1xyXG4gICAgICAuLi5vcGVyYXRpb24sXHJcbiAgICAgIGJsb2NrSWQsXHJcbiAgICAgIGJsb2NrVGl0bGU6IGJsb2NrRGF0YS50aXRsZSxcclxuICAgICAgc2F2ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBoaXN0b3J5LnB1c2goaGlzdG9yaWNhbE9wZXJhdGlvbik7XHJcbiAgICBcclxuICAgIC8vIE1hbnRlbmVyIHNvbG8gbGFzIMO6bHRpbWFzIDEwMDAgb3BlcmFjaW9uZXMgcGFyYSBldml0YXIgcHJvYmxlbWFzIGRlIG1lbW9yaWFcclxuICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IDEwMDApIHtcclxuICAgICAgaGlzdG9yeSA9IGhpc3Rvcnkuc2xpY2UoLTEwMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShnbG9iYWxIaXN0b3J5S2V5LCBKU09OLnN0cmluZ2lmeShoaXN0b3J5KSk7XHJcbiAgfSwgW2Jsb2NrSWQsIGJsb2NrRGF0YS50aXRsZV0pO1xyXG5cclxuICAvLyBGdW5jacOzbiBwYXJhIHJlZ2lzdHJhciByZXNldCBkZWwgYmxvcXVlXHJcbiAgY29uc3Qgc2F2ZUJsb2NrUmVzZXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjb25zdCByZXNldEhpc3RvcnlLZXkgPSAnYmxvY2tSZXNldEhpc3RvcnknO1xyXG4gICAgY29uc3QgZXhpc3RpbmdSZXNldHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShyZXNldEhpc3RvcnlLZXkpO1xyXG4gICAgbGV0IHJlc2V0cyA9IFtdO1xyXG4gICAgXHJcbiAgICBpZiAoZXhpc3RpbmdSZXNldHMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICByZXNldHMgPSBKU09OLnBhcnNlKGV4aXN0aW5nUmVzZXRzKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIHJlc2V0IGhpc3Rvcnk6JywgZXJyb3IpO1xyXG4gICAgICAgIHJlc2V0cyA9IFtdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc2V0UmVjb3JkID0ge1xyXG4gICAgICBibG9ja0lkLFxyXG4gICAgICBibG9ja1RpdGxlOiBibG9ja0RhdGEudGl0bGUsXHJcbiAgICAgIHJlc2V0QXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgb3BlcmF0aW9uc0xvc3Q6IHN0YXR1cy5sZW5ndGgsXHJcbiAgICAgIHZpZXdlcnNMb3N0OiB0b3RhbFZpZXdlcnNcclxuICAgIH07XHJcbiAgICBcclxuICAgIHJlc2V0cy5wdXNoKHJlc2V0UmVjb3JkKTtcclxuICAgIFxyXG4gICAgLy8gTWFudGVuZXIgc29sbyBsb3Mgw7psdGltb3MgMTAwIHJlc2V0c1xyXG4gICAgaWYgKHJlc2V0cy5sZW5ndGggPiAxMDApIHtcclxuICAgICAgcmVzZXRzID0gcmVzZXRzLnNsaWNlKC0xMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShyZXNldEhpc3RvcnlLZXksIEpTT04uc3RyaW5naWZ5KHJlc2V0cykpO1xyXG4gIH0sIFtibG9ja0lkLCBibG9ja0RhdGEudGl0bGUsIHN0YXR1cy5sZW5ndGgsIHRvdGFsVmlld2Vyc10pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9e2BibG9jayAke3RoZW1lfWB9PlxyXG4gICAgICA8aDIgY2xhc3NOYW1lPVwiYmxvY2stdGl0bGVcIj57YmxvY2tEYXRhLnRpdGxlfTwvaDI+XHJcbiAgICAgIFxyXG4gICAgICB7YmxvY2tEYXRhLmF1dG9TdGFydCAmJiBibG9ja0RhdGEuc3RhcnRUaW1lICYmIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF1dG8tc3RhcnQtaW5mb1wiPlxyXG4gICAgICAgICAg4o+wIEluaWNpbyBhdXRvbcOhdGljbzoge2Jsb2NrRGF0YS5zdGFydFRpbWV9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcblxyXG4gICAgICB7KHN0YXRlID09PSAncGF1c2VkJyB8fCBzdGF0ZSA9PT0gJ2NvbXBsZXRlZCcpICYmIChcclxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2dlbmVyYXRlRXhjZWx9IGNsYXNzTmFtZT1cImRvd25sb2FkLWljb25cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImljb24tZG93bmxvYWRcIj48L3NwYW4+XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICl9XHJcblxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0YXR1c1wiPlxyXG4gICAgICAgIHtBcnJheS5mcm9tKHsgbGVuZ3RoOiBibG9ja0RhdGEudG90YWxPcGVyYXRpb25zIH0pLm1hcCgoXywgc3RhdHVzSW5kZXgpID0+IChcclxuICAgICAgICAgIDxkaXYga2V5PXtzdGF0dXNJbmRleH0gY2xhc3NOYW1lPVwic3RhdHVzLWl0ZW1cIj5cclxuICAgICAgICAgICAge2BPcGVyYWNpw7NuICR7c3RhdHVzSW5kZXggKyAxfTogYH1cclxuICAgICAgICAgICAge3N0YXR1c1tzdGF0dXNJbmRleF0gPyAoXHJcbiAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgIHtzdGF0dXNbc3RhdHVzSW5kZXhdLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnID8gKFxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzdGF0dXMtc3VjY2Vzc1wiPuKchTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN0YXR1cy1lcnJvclwiPuKdjDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0aW1lc3RhbXBcIj57c3RhdHVzW3N0YXR1c0luZGV4XS50aW1lc3RhbXB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAge3N0YXR1c1tzdGF0dXNJbmRleF0ub3JkZXJTdGF0dXMgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJvcmRlci1zdGF0dXNcIj57c3RhdHVzW3N0YXR1c0luZGV4XS5vcmRlclN0YXR1c308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN0YXR1cy1wZW5kaW5nXCI+4o+zPC9zcGFuPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJibG9jay1jb250cm9sc1wiPlxyXG4gICAgICAgIHtzdGF0ZSA9PT0gJ2lkbGUnICYmIChcclxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17c3RhcnRCbG9ja30gY2xhc3NOYW1lPVwic3RhcnQtYnV0dG9uXCI+XHJcbiAgICAgICAgICAgIOKWtu+4jyBJbmljaWFyXHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICApfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHtzdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIChcclxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17cGF1c2VCbG9ja30gY2xhc3NOYW1lPVwicGF1c2UtYnV0dG9uXCI+XHJcbiAgICAgICAgICAgIOKPuO+4jyBQYXVzYXJcclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAgXHJcbiAgICAgICAge3N0YXRlID09PSAncGF1c2VkJyAmJiAoXHJcbiAgICAgICAgICA8PlxyXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3Jlc3VtZUJsb2NrfSBjbGFzc05hbWU9XCJyZXN1bWUtYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAg4pa277iPIFJlYW51ZGFyXHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IG9uU2hvd1dhcm5pbmcoYmxvY2tJZCwgJ2ZpbmFsaXphcicpfSBjbGFzc05hbWU9XCJmaW5hbGl6ZS1idXR0b25cIj5cclxuICAgICAgICAgICAgICDwn4+BIEZpbmFsaXphclxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBvblNob3dXYXJuaW5nKGJsb2NrSWQsICdyZWluaWNpYXInKX0gY2xhc3NOYW1lPVwicmVzZXQtYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAg8J+UhCBSZWluaWNpYXJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8Lz5cclxuICAgICAgICApfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHtzdGF0ZSA9PT0gJ2NvbXBsZXRlZCcgJiYgKFxyXG4gICAgICAgICAgPD5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21wbGV0ZWQtbWVzc2FnZVwiPuKchSBCbG9xdWUgZmluYWxpemFkbzwvZGl2PlxyXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IG9uU2hvd1dhcm5pbmcoYmxvY2tJZCwgJ3JlaW5pY2lhcicpfSBjbGFzc05hbWU9XCJyZXNldC1idXR0b25cIj5cclxuICAgICAgICAgICAgICDwn5SEIFJlaW5pY2lhclxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVFZGl0TW9kYWx9IGNsYXNzTmFtZT1cImVkaXQtYnV0dG9uXCI+XHJcbiAgICAgICAgICDinI/vuI8gRWRpdGFyXHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b3RhbC12aWV3ZXJzXCI+8J+RpSB7dG90YWxWaWV3ZXJzfTwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJsb2NrO1xyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZUNhbGxiYWNrIiwidXNlVGhlbWUiLCJYTFNYIiwiQmxvY2siLCJpbml0aWFsRGF0YSIsImxpbmsiLCJvblRvdGFsVmlld2Vyc0NoYW5nZSIsImJsb2NrSWQiLCJvblNob3dXYXJuaW5nIiwib25TaG93RWRpdE1vZGFsIiwidGhlbWUiLCJsb2FkQmxvY2tTdGF0ZSIsInNhdmVkU3RhdGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwibGFzdFNhdmVkIiwibGFzdFNhdmVkRGF0ZSIsIkRhdGUiLCJub3ciLCJkYXlzRGlmZiIsImdldFRpbWUiLCJyZW1vdmVJdGVtIiwiZXJyb3IiLCJjb25zb2xlIiwic3RhdHVzIiwic2V0U3RhdHVzIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsSWQiLCJpc1BhdXNlZCIsInNldElzUGF1c2VkIiwiY3VycmVudE9wZXJhdGlvbiIsInNldEN1cnJlbnRPcGVyYXRpb24iLCJzdGF0ZSIsInNldFN0YXRlIiwic2F2ZWRTdGF0ZVZhbHVlIiwidG90YWxWaWV3ZXJzIiwic2V0VG90YWxWaWV3ZXJzIiwiYmxvY2tEYXRhIiwic2V0QmxvY2tEYXRhIiwic2F2ZUJsb2NrU3RhdGUiLCJzdGF0ZVRvU2F2ZSIsInRvSVNPU3RyaW5nIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImludGVydmFsUmVmIiwibGFzdFJlcG9ydGVkVmlld2VycyIsInN0YXRlUmVmIiwiY3VycmVudE9wZXJhdGlvblJlZiIsImJsb2NrRGF0YVJlZiIsInN0YXR1c1JlZiIsInRvdGFsVmlld2Vyc1JlZiIsImN1cnJlbnQiLCJhdXRvU3RhcnQiLCJzdGFydFRpbWUiLCJob3VycyIsIm1pbnV0ZXMiLCJzcGxpdCIsIm1hcCIsIk51bWJlciIsInN0YXJ0IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkZWxheSIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJzdGFydEJsb2NrIiwiY2xlYXJUaW1lb3V0IiwiaGFuZGxlQmVmb3JlVW5sb2FkIiwiY2xlYXJJbnRlcnZhbCIsImZpbmFsU3RhdGUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldFNlcnZpY2VEdXJhdGlvbiIsInNlcnZpY2VJZCIsImdlbmVyYXRlRXhjZWwiLCJjdXJyZW50U3RhdHVzIiwiY3VycmVudEJsb2NrRGF0YSIsInN1bW1hcnkiLCJzdGF0dXNJdGVtIiwibWVzc2FnZSIsInRpbWVzdGFtcCIsIm9yZGVySWQiLCJvcmRlclN0YXR1cyIsImR1cmF0aW9uIiwiY291bnQiLCJkZXRhaWxzIiwicmVzIiwic3VtIiwiZW5kVGltZSIsInRpbWVJbnRlcnZhbHMiLCJjdXJyZW50VGltZSIsInB1c2giLCJIb3JhIiwic3Vic3RyIiwiY29zdFJvdyIsImZvckVhY2giLCJzdGFydFRpbWVTdHJpbmciLCJ0aW1lTWF0Y2giLCJtYXRjaCIsInBhZFN0YXJ0Iiwid2FybiIsIm9yZGVySWRDb2x1bW4iLCJpbnRlcnZhbCIsInN0YXJ0SW5kZXgiLCJmaW5kSW5kZXgiLCJlbnRyeSIsImkiLCJsZW5ndGgiLCJhbGxSb3dzIiwid3NTdW1tYXJ5IiwidXRpbHMiLCJqc29uX3RvX3NoZWV0Iiwid3NWaWV3ZXJzIiwid2IiLCJib29rX25ldyIsImJvb2tfYXBwZW5kX3NoZWV0Iiwid3JpdGVGaWxlIiwidGl0bGUiLCJoYW5kbGVBcGlDYWxsIiwibG9nIiwiZGF0YSIsImN1cnJlbnRPcE51bSIsImRlY3JlbWVudCIsIm9wZXJhdGlvblR5cGUiLCJvcGVyYXRpb25Db3VudCIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwidG9UaW1lU3RyaW5nIiwiZXN0aW1hdGVkRW5kVGltZSIsIm5ld1N0YXR1cyIsIm9yZGVyX2lkIiwiY29zdCIsInByZXYiLCJzYXZlVG9HbG9iYWxIaXN0b3J5IiwibmV4dE9wZXJhdGlvbiIsInRvdGFsT3BlcmF0aW9ucyIsIk5vdGlmaWNhdGlvbiIsInBlcm1pc3Npb24iLCJib2R5IiwiaWNvbiIsIm5ld0ludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsInBhdXNlQmxvY2siLCJyZXN1bWVCbG9jayIsImZpbmFsaXplQmxvY2siLCJyZXNldEJsb2NrIiwic2F2ZUJsb2NrUmVzZXQiLCJoYW5kbGVFZGl0TW9kYWwiLCJ1cGRhdGVCbG9ja0RhdGEiLCJuZXdEYXRhIiwib3BlcmF0aW9uIiwiZ2xvYmFsSGlzdG9yeUtleSIsImV4aXN0aW5nSGlzdG9yeSIsImhpc3RvcnkiLCJoaXN0b3JpY2FsT3BlcmF0aW9uIiwiYmxvY2tUaXRsZSIsInNhdmVkQXQiLCJzbGljZSIsInJlc2V0SGlzdG9yeUtleSIsImV4aXN0aW5nUmVzZXRzIiwicmVzZXRzIiwicmVzZXRSZWNvcmQiLCJyZXNldEF0Iiwib3BlcmF0aW9uc0xvc3QiLCJ2aWV3ZXJzTG9zdCIsImRpdiIsImNsYXNzTmFtZSIsImgyIiwiYnV0dG9uIiwib25DbGljayIsInNwYW4iLCJBcnJheSIsImZyb20iLCJfIiwic3RhdHVzSW5kZXgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/components/Block.tsx\n"));

/***/ })

});